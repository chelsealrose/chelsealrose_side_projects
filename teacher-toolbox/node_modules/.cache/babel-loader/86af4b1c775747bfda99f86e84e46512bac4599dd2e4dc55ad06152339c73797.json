{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Student\\\\Documents\\\\workspace\\\\SideProjects\\\\chelsealrose_side_projects\\\\teacher-toolbox\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\n// src/App.jsx\nimport React, { useState, useEffect, useRef } from 'react';\nimport { auth, db, signInAnonymously, signInWithCustomToken, onAuthStateChanged, onSnapshot, collection, doc, deleteDoc, query, where, getDocs, addDoc, updateDoc, APP_ID_FOR_FIRESTORE } from './firebaseConfig'; // Import from your firebaseConfig.js\n\n// Import individual components\nimport Dashboard from './components/Dashboard';\nimport AdminSettings from './components/AdminSettings';\nimport PrintStudentIDs from './components/PrintStudentIDs';\nimport LibrarySystem from './components/LibrarySystem';\nimport RandomChildSelector from './components/RandomChildSelector';\nimport RewardSystem from './components/RewardSystem';\nimport ExtraCreditPortal from './components/ExtraCreditPortal';\nimport SavedAssignments from './components/SavedAssignments';\nimport QuestionGenerator from './components/QuestionGenerator';\nimport CustomModal from './components/CustomModal';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [currentDb, setCurrentDb] = useState(null); // Renamed to avoid conflict with imported 'db'\n  const [currentAuth, setCurrentAuth] = useState(null); // Renamed to avoid conflict with imported 'auth'\n  const [userId, setUserId] = useState(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [currentPage, setCurrentPage] = useState('dashboard');\n\n  // Student Management (Random Child Selector & Rewards)\n  const [students, setStudents] = useState([]);\n  const [newStudentName, setNewStudentName] = useState('');\n  const [selectedStudents, setSelectedStudents] = useState([]); // For random selector\n  const [countdown, setCountdown] = useState(3);\n  const [pickingStudent, setPickingStudent] = useState(false);\n  const [currentPickedStudent, setCurrentPickedStudent] = useState(null);\n  const countdownIntervalRef = useRef(null);\n\n  // Library System\n  const [books, setBooks] = useState([]);\n  const [newBookISBN, setNewBookISBN] = useState('');\n  const [newBookTitle, setNewBookTitle] = useState('');\n  const [newBookAuthor, setNewBookAuthor] = useState('');\n  const [libraryStudentBarcodeInput, setLibraryStudentBarcodeInput] = useState('');\n  const [selectedBookForCheckout, setSelectedBookForCheckout] = useState(null);\n  const [selectedBookForCheckin, setSelectedBookForCheckin] = useState(null);\n  const [isbnSearchInput, setIsbnSearchInput] = useState('');\n  const [isbnSearchLoading, setIsbnSearchLoading] = useState(false);\n\n  // Reward System\n  const [rewardItems, setRewardItems] = useState([]);\n  const [newRewardItemName, setNewRewardItemName] = useState('');\n  const [newRewardItemCost, setNewRewardItemCost] = useState('');\n  const [newRewardItemQuantity, setNewRewardItemQuantity] = useState('');\n  const [rewardStudentSearchInput, setRewardStudentSearchInput] = useState('');\n  const [currentRewardStudent, setCurrentRewardStudent] = useState(null);\n  const [pointsToAdd, setPointsToAdd] = useState('');\n  const [selectedRewardItem, setSelectedRewardItem] = useState(null);\n\n  // Extra Credit / Busy Work Portal\n  const [assignmentAge, setAssignmentAge] = useState('1');\n  const [assignmentTopic, setAssignmentTopic] = useState('');\n  const [generatedAssignmentContent, setGeneratedAssignmentContent] = useState('');\n  const [generatedAssignmentAnswerKey, setGeneratedAssignmentAnswerKey] = useState('');\n  const [showAssignmentAnswerKey, setShowAssignmentAnswerKey] = useState(false);\n  const [generatingAssignment, setGeneratingAssignment] = useState(false);\n  const [assignmentGenerationError, setAssignmentGenerationError] = useState('');\n  const [savedAssignments, setSavedAssignments] = useState([]);\n\n  // Question Generator\n  const [questionGrade, setQuestionGrade] = useState('1');\n  const [questionTopic, setQuestionTopic] = useState('');\n  const [generatedQuestion, setGeneratedQuestion] = useState('');\n  const [generatedAnswer, setGeneratedAnswer] = useState('');\n  const [showQuestionAnswer, setShowQuestionAnswer] = useState(false);\n  const [questionLoading, setQuestionLoading] = useState(false);\n  const [questionError, setQuestionError] = useState('');\n\n  // Global Modal for messages (replaces alert)\n  const [showModal, setShowModal] = useState(false);\n  const [modalTitle, setModalTitle] = useState('');\n  const [modalMessage, setModalMessage] = useState('');\n\n  // Refs for input fields to manage focus (removed onChange focus calls)\n  const newStudentNameRef = useRef(null);\n  const isbnSearchInputRef = useRef(null);\n  const newBookISBNRef = useRef(null);\n  const newBookTitleRef = useRef(null);\n  const newBookAuthorRef = useRef(null);\n  const libraryStudentBarcodeInputRef = useRef(null);\n  const rewardStudentSearchInputRef = useRef(null);\n  const pointsToAddRef = useRef(null);\n  const newRewardItemNameRef = useRef(null);\n  const newRewardItemCostRef = useRef(null);\n  const newRewardItemQuantityRef = useRef(null);\n  const assignmentTopicRef = useRef(null);\n  const questionTopicRef = useRef(null);\n  const displayModal = (title, message) => {\n    setModalTitle(title);\n    setModalMessage(message);\n    setShowModal(true);\n  };\n  const closeModal = () => {\n    setShowModal(false);\n    setModalTitle('');\n    setModalMessage('');\n  };\n\n  // Firebase Initialization and Authentication\n  useEffect(() => {\n    setCurrentDb(db); // Set the imported db to state\n    setCurrentAuth(auth); // Set the imported auth to state\n\n    const unsubscribe = onAuthStateChanged(auth, async user => {\n      if (user) {\n        setUserId(user.uid);\n      } else {\n        // For local development, sign in anonymously if no user\n        await signInAnonymously(auth);\n      }\n      setIsAuthReady(true);\n    });\n    return () => unsubscribe(); // Cleanup auth listener\n  }, []); // Run only once on component mount\n\n  // Fetch all data when auth is ready and userId is available\n  useEffect(() => {\n    if (currentDb && userId && isAuthReady) {\n      // Fetch Students\n      const studentsCollectionRef = collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`);\n      const unsubscribeStudents = onSnapshot(studentsCollectionRef, snapshot => {\n        const studentList = snapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setStudents(studentList);\n        setSelectedStudents(studentList); // Initialize selected students for random selector\n      }, error => {\n        console.error(\"Error fetching students:\", error);\n        displayModal(\"Data Error\", \"Failed to load student data.\");\n      });\n\n      // Fetch Books\n      const booksCollectionRef = collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/books`);\n      const unsubscribeBooks = onSnapshot(booksCollectionRef, snapshot => {\n        const bookList = snapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setBooks(bookList);\n      }, error => {\n        console.error(\"Error fetching books:\", error);\n        displayModal(\"Data Error\", \"Failed to load book data.\");\n      });\n\n      // Fetch Reward Items\n      const rewardItemsCollectionRef = collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/rewardItems`);\n      const unsubscribeRewardItems = onSnapshot(rewardItemsCollectionRef, snapshot => {\n        const itemList = snapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setRewardItems(itemList);\n      }, error => {\n        console.error(\"Error fetching reward items:\", error);\n        displayModal(\"Data Error\", \"Failed to load reward item data.\");\n      });\n\n      // Fetch Saved Assignments\n      const savedAssignmentsCollectionRef = collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/savedAssignments`);\n      const unsubscribeSavedAssignments = onSnapshot(savedAssignmentsCollectionRef, snapshot => {\n        const assignmentList = snapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setSavedAssignments(assignmentList);\n      }, error => {\n        console.error(\"Error fetching saved assignments:\", error);\n        displayModal(\"Data Error\", \"Failed to load saved assignments data.\");\n      });\n      return () => {\n        unsubscribeStudents();\n        unsubscribeBooks();\n        unsubscribeRewardItems();\n        unsubscribeSavedAssignments();\n      }; // Cleanup listeners on unmount\n    }\n  }, [currentDb, userId, isAuthReady]);\n\n  // --- Student Management Functions ---\n  const addStudent = async () => {\n    if (currentDb && userId && newStudentName.trim() !== '') {\n      try {\n        // Generate a shorter, unique alphanumeric barcode (e.g., first 12 chars of UUID)\n        const studentBarcode = crypto.randomUUID().substring(0, 12).toUpperCase();\n\n        // Generate a unique 4-digit PIN\n        let studentPin = '';\n        let isPinUnique = false;\n        let attempts = 0;\n        const existingPins = students.map(s => s.pin);\n        while (!isPinUnique && attempts < 100) {\n          // Limit attempts to prevent infinite loop\n          const randomPin = Math.floor(1000 + Math.random() * 9000).toString(); // 4-digit number\n          if (!existingPins.includes(randomPin)) {\n            studentPin = randomPin;\n            isPinUnique = true;\n          }\n          attempts++;\n        }\n        if (!isPinUnique) {\n          displayModal(\"Error\", \"Could not generate a unique 4-digit PIN. Please try again or contact support.\");\n          return;\n        }\n        await addDoc(collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`), {\n          name: newStudentName.trim(),\n          barcode: studentBarcode,\n          pin: studentPin,\n          // New 4-digit PIN\n          points: 0 // Initialize points to 0\n        });\n        setNewStudentName('');\n        displayModal(\"Success\", `Student \"${newStudentName.trim()}\" added!\\nBarcode: ${studentBarcode}\\nPIN: ${studentPin}`);\n      } catch (error) {\n        console.error(\"Error adding student:\", error);\n        displayModal(\"Error\", \"Failed to add student.\");\n      }\n    } else {\n      displayModal(\"Input Required\", \"Please enter a student name.\");\n    }\n  };\n  const removeStudent = async studentId => {\n    if (currentDb && userId) {\n      try {\n        await deleteDoc(doc(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`, studentId));\n        displayModal(\"Success\", \"Student removed successfully.\");\n      } catch (error) {\n        console.error(\"Error removing student:\", error);\n        displayModal(\"Error\", \"Failed to remove student.\");\n      }\n    }\n  };\n\n  // Enhanced student lookup by name, barcode, or PIN\n  const searchStudent = async searchTerm => {\n    if (currentDb && userId && searchTerm.trim() !== '') {\n      const lowerCaseSearchTerm = searchTerm.trim().toLowerCase();\n      try {\n        // Search by barcode\n        let q = query(collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`), where(\"barcode\", \"==\", searchTerm.trim().toUpperCase()));\n        let querySnapshot = await getDocs(q);\n        if (!querySnapshot.empty) {\n          return {\n            id: querySnapshot.docs[0].id,\n            ...querySnapshot.docs[0].data()\n          };\n        }\n\n        // Search by PIN\n        q = query(collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`), where(\"pin\", \"==\", searchTerm.trim()));\n        querySnapshot = await getDocs(q);\n        if (!querySnapshot.empty) {\n          return {\n            id: querySnapshot.docs[0].id,\n            ...querySnapshot.docs[0].data()\n          };\n        }\n\n        // Search by name (case-insensitive, partial match)\n        // Note: Firestore does not support case-insensitive partial string search directly.\n        // We'll fetch all students and filter client-side for simplicity.\n        // For large datasets, a dedicated search index (e.g., Algolia, ElasticSearch) would be needed.\n        const allStudentsSnapshot = await getDocs(collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`));\n        const matchedStudent = allStudentsSnapshot.docs.find(doc => doc.data().name.toLowerCase().includes(lowerCaseSearchTerm));\n        if (matchedStudent) {\n          return {\n            id: matchedStudent.id,\n            ...matchedStudent.data()\n          };\n        }\n      } catch (error) {\n        console.error(\"Error searching student:\", error);\n      }\n    }\n    return null;\n  };\n\n  // --- Random Child Selector Logic ---\n  const startPickingStudent = () => {\n    if (students.length === 0) {\n      setCurrentPickedStudent(\"No students available!\");\n      displayModal(\"No Students\", \"Please add students to the list first in Admin Settings.\");\n      return;\n    }\n    if (selectedStudents.length === 0) {\n      setSelectedStudents([...students]); // Reset if all students have been picked\n    }\n    setPickingStudent(true);\n    setCountdown(3);\n    setCurrentPickedStudent(null);\n    countdownIntervalRef.current = setInterval(() => {\n      setCountdown(prev => {\n        if (prev === 1) {\n          clearInterval(countdownIntervalRef.current);\n          pickRandomStudent();\n          setPickingStudent(false);\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n  };\n  const pickRandomStudent = () => {\n    if (selectedStudents.length === 0) {\n      setCurrentPickedStudent(\"All students picked! Resetting...\");\n      setTimeout(() => setSelectedStudents([...students]), 1000); // Reset after a short delay\n      return;\n    }\n    const randomIndex = Math.floor(Math.random() * selectedStudents.length);\n    const picked = selectedStudents[randomIndex];\n    setCurrentPickedStudent(picked.name);\n\n    // Remove picked student from the selected list for this round\n    const updatedSelected = selectedStudents.filter(s => s.id !== picked.id);\n    setSelectedStudents(updatedSelected);\n  };\n  const resetPickedStudents = () => {\n    setSelectedStudents([...students]);\n    setCurrentPickedStudent(null);\n    setPickingStudent(false);\n    setCountdown(3);\n    clearInterval(countdownIntervalRef.current);\n  };\n\n  // --- Library System Functions ---\n  const handleISBNLookup = async () => {\n    if (!isbnSearchInput.trim()) {\n      displayModal(\"Input Required\", \"Please enter an ISBN to search.\");\n      return;\n    }\n    setIsbnSearchLoading(true);\n    try {\n      const response = await fetch(`https://www.googleapis.com/books/v1/volumes?q=isbn:${isbnSearchInput.trim()}`);\n      const data = await response.json();\n      if (data.items && data.items.length > 0) {\n        const bookInfo = data.items[0].volumeInfo;\n        setNewBookTitle(bookInfo.title || 'N/A');\n        setNewBookAuthor(bookInfo.authors ? bookInfo.authors.join(', ') : 'N/A');\n        displayModal(\"Book Found\", `Found: \"${bookInfo.title}\" by ${bookInfo.authors ? bookInfo.authors.join(', ') : 'N/A'}`);\n      } else {\n        displayModal(\"Book Not Found\", \"No book found for this ISBN. Please check the number or enter details manually.\");\n        setNewBookISBN(''); // Clear ISBN if not found\n        setNewBookTitle('');\n        setNewBookAuthor('');\n      }\n    } catch (error) {\n      console.error(\"Error fetching ISBN data:\", error);\n      displayModal(\"Search Error\", \"Failed to search ISBN. Please check your connection or try again.\");\n    } finally {\n      setIsbnSearchLoading(false);\n    }\n  };\n  const addBook = async () => {\n    if (currentDb && userId && newBookISBN.trim() && newBookTitle.trim() && newBookAuthor.trim()) {\n      try {\n        await addDoc(collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/books`), {\n          isbn: newBookISBN.trim(),\n          title: newBookTitle.trim(),\n          author: newBookAuthor.trim(),\n          isAvailable: true,\n          currentBorrowerId: null,\n          currentBorrowerName: null,\n          checkoutDate: null // New field for tracking checkout date\n        });\n        setNewBookISBN('');\n        setNewBookTitle('');\n        setNewBookAuthor('');\n        setIsbnSearchInput(''); // Clear ISBN search input too\n        displayModal(\"Success\", \"Book added to library.\");\n      } catch (error) {\n        console.error(\"Error adding book:\", error);\n        displayModal(\"Error\", \"Failed to add book.\");\n      }\n    } else {\n      displayModal(\"Input Required\", \"Please fill in all book details (ISBN, Title, Author).\");\n    }\n  };\n  const checkoutBook = async () => {\n    if (!selectedBookForCheckout) {\n      displayModal(\"Selection Required\", \"Please select a book to checkout.\");\n      return;\n    }\n    const student = await searchStudent(libraryStudentBarcodeInput); // Use enhanced search\n    if (!student) {\n      displayModal(\"Student Not Found\", \"No student found with that barcode/PIN/name. Please check the input.\");\n      return;\n    }\n    if (!selectedBookForCheckout.isAvailable) {\n      displayModal(\"Book Unavailable\", \"This book is currently not available for checkout.\");\n      return;\n    }\n    if (currentDb && userId) {\n      try {\n        await updateDoc(doc(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/books`, selectedBookForCheckout.id), {\n          isAvailable: false,\n          currentBorrowerId: student.id,\n          currentBorrowerName: student.name,\n          checkoutDate: new Date().toISOString() // Store checkout date\n        });\n        setSelectedBookForCheckout(null);\n        setLibraryStudentBarcodeInput('');\n        displayModal(\"Success\", `\"${selectedBookForCheckout.title}\" checked out by ${student.name}.`);\n      } catch (error) {\n        console.error(\"Error checking out book:\", error);\n        displayModal(\"Error\", \"Failed to checkout book.\");\n      }\n    }\n  };\n  const checkinBook = async () => {\n    if (!selectedBookForCheckin) {\n      displayModal(\"Selection Required\", \"Please select a book to check-in.\");\n      return;\n    }\n    if (selectedBookForCheckin.isAvailable) {\n      displayModal(\"Book Status\", \"This book is already marked as available.\");\n      return;\n    }\n    if (currentDb && userId) {\n      try {\n        await updateDoc(doc(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/books`, selectedBookForCheckin.id), {\n          isAvailable: true,\n          currentBorrowerId: null,\n          currentBorrowerName: null,\n          checkoutDate: null // Clear checkout date on check-in\n        });\n        setSelectedBookForCheckin(null);\n        displayModal(\"Success\", `\"${selectedBookForCheckin.title}\" checked in.`);\n      } catch (error) {\n        console.error(\"Error checking in book:\", error);\n        displayModal(\"Error\", \"Failed to check-in book.\");\n      }\n    }\n  };\n\n  // --- Reward System Functions ---\n  const addRewardItem = async () => {\n    if (currentDb && userId && newRewardItemName.trim() && newRewardItemCost.trim() && newRewardItemQuantity.trim()) {\n      const cost = parseInt(newRewardItemCost.trim());\n      const quantity = parseInt(newRewardItemQuantity.trim());\n      if (isNaN(cost) || cost <= 0 || isNaN(quantity) || quantity < 0) {\n        displayModal(\"Invalid Input\", \"Cost must be a positive number and Quantity must be a non-negative number.\");\n        return;\n      }\n      try {\n        await addDoc(collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/rewardItems`), {\n          name: newRewardItemName.trim(),\n          cost: cost,\n          quantity: quantity\n        });\n        setNewRewardItemName('');\n        setNewRewardItemCost('');\n        setNewRewardItemQuantity('');\n        displayModal(\"Success\", `Reward item \"${newRewardItemName.trim()}\" added.`);\n      } catch (error) {\n        console.error(\"Error adding reward item:\", error);\n        displayModal(\"Error\", \"Failed to add reward item.\");\n      }\n    } else {\n      displayModal(\"Input Required\", \"Please fill in all reward item details.\");\n    }\n  };\n  const handleRewardStudentLookup = async () => {\n    const student = await searchStudent(rewardStudentSearchInput); // Use enhanced search\n    if (student) {\n      setCurrentRewardStudent(student);\n      displayModal(\"Student Found\", `Student: ${student.name} (Points: ${student.points})`);\n    } else {\n      setCurrentRewardStudent(null);\n      displayModal(\"Student Not Found\", \"No student found with that barcode/PIN/name.\");\n    }\n  };\n  const addPoints = async () => {\n    if (!currentRewardStudent) {\n      displayModal(\"No Student Selected\", \"Please lookup a student first.\");\n      return;\n    }\n    const points = parseInt(pointsToAdd.trim());\n    if (isNaN(points) || points <= 0) {\n      displayModal(\"Invalid Input\", \"Points to add must be a positive number.\");\n      return;\n    }\n    if (currentDb && userId) {\n      try {\n        await updateDoc(doc(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`, currentRewardStudent.id), {\n          points: currentRewardStudent.points + points\n        });\n        setPointsToAdd('');\n        displayModal(\"Success\", `${points} points added to ${currentRewardStudent.name}.`);\n        // Refresh currentRewardStudent to show updated points\n        const updatedStudent = await searchStudent(rewardStudentSearchInput);\n        setCurrentRewardStudent(updatedStudent);\n      } catch (error) {\n        console.error(\"Error adding points:\", error);\n        displayModal(\"Error\", \"Failed to add points.\");\n      }\n    }\n  };\n  const checkoutRewardItem = async () => {\n    if (!currentRewardStudent) {\n      displayModal(\"No Student Selected\", \"Please lookup a student first.\");\n      return;\n    }\n    if (!selectedRewardItem) {\n      displayModal(\"No Item Selected\", \"Please select a reward item to checkout.\");\n      return;\n    }\n    if (currentRewardStudent.points < selectedRewardItem.cost) {\n      displayModal(\"Insufficient Points\", `${currentRewardStudent.name} does not have enough points for \"${selectedRewardItem.name}\".`);\n      return;\n    }\n    if (selectedRewardItem.quantity <= 0) {\n      displayModal(\"Out of Stock\", `\"${selectedRewardItem.name}\" is out of stock.`);\n      return;\n    }\n    if (currentDb && userId) {\n      try {\n        // Deduct points from student\n        await updateDoc(doc(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`, currentRewardStudent.id), {\n          points: currentRewardStudent.points - selectedRewardItem.cost\n        });\n        // Decrease item quantity\n        await updateDoc(doc(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/rewardItems`, selectedRewardItem.id), {\n          quantity: selectedRewardItem.quantity - 1\n        });\n        setSelectedRewardItem(null);\n        displayModal(\"Success\", `\"${selectedRewardItem.name}\" checked out by ${currentRewardStudent.name}. Points deducted.`);\n        // Refresh currentRewardStudent to show updated points\n        const updatedStudent = await searchStudent(rewardStudentSearchInput);\n        setCurrentRewardStudent(updatedStudent);\n      } catch (error) {\n        console.error(\"Error checking out reward item:\", error);\n        displayModal(\"Error\", \"Failed to checkout reward item.\");\n      }\n    }\n  };\n\n  // --- Extra Credit / Busy Work Functions ---\n  const generateAssignment = async () => {\n    setGeneratingAssignment(true);\n    setAssignmentGenerationError('');\n    setGeneratedAssignmentContent('');\n    setGeneratedAssignmentAnswerKey('');\n    setShowAssignmentAnswerKey(false);\n    const prompt = `Generate a short, printable extra credit or busy work assignment for a ${assignmentAge}th grade student on the topic of \"${assignmentTopic}\". The assignment should be engaging and suitable for independent work. Provide the output in two distinct sections, clearly labeled \"Assignment:\" and \"Answer Key:\". If an answer key is not applicable or cannot be generated, state \"No Answer Key Provided.\"`;\n    try {\n      let chatHistory = [];\n      chatHistory.push({\n        role: \"user\",\n        parts: [{\n          text: prompt\n        }]\n      });\n      const payload = {\n        contents: chatHistory\n      };\n      const apiKey = \"\"; // Canvas will provide this at runtime\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const result = await response.json();\n      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n        const text = result.candidates[0].content.parts[0].text;\n\n        // Improved parsing logic for Assignment and Answer Key\n        const assignmentMarker = \"Assignment:\";\n        const answerKeyMarker = \"Answer Key:\";\n        const assignmentIndex = text.indexOf(assignmentMarker);\n        const answerKeyIndex = text.indexOf(answerKeyMarker);\n        let assignmentContent = \"\";\n        let answerKeyContent = \"\";\n        if (assignmentIndex !== -1) {\n          if (answerKeyIndex !== -1 && answerKeyIndex > assignmentIndex) {\n            assignmentContent = text.substring(assignmentIndex + assignmentMarker.length, answerKeyIndex).trim();\n            answerKeyContent = text.substring(answerKeyIndex + answerKeyMarker.length).trim();\n          } else {\n            assignmentContent = text.substring(assignmentIndex + assignmentMarker.length).trim();\n            answerKeyContent = \"No Answer Key Provided.\"; // Default if marker not found\n          }\n        } else if (answerKeyIndex !== -1) {\n          // If only answer key is found, assume content before it is assignment\n          assignmentContent = text.substring(0, answerKeyIndex).trim();\n          answerKeyContent = text.substring(answerKeyIndex + answerKeyMarker.length).trim();\n        } else {\n          // If neither marker is found, treat the whole text as assignment\n          assignmentContent = text.trim();\n          answerKeyContent = \"No Answer Key Provided.\"; // Default if no markers\n        }\n        setGeneratedAssignmentContent(assignmentContent);\n        setGeneratedAssignmentAnswerKey(answerKeyContent);\n      } else {\n        setAssignmentGenerationError(\"Failed to generate assignment. Please try again.\");\n      }\n    } catch (err) {\n      console.error(\"Error generating assignment:\", err);\n      setAssignmentGenerationError(\"An error occurred while generating the assignment. Please check your network connection.\");\n    } finally {\n      setGeneratingAssignment(false);\n    }\n  };\n  const saveAssignment = async () => {\n    if (currentDb && userId && generatedAssignmentContent.trim() !== '') {\n      try {\n        await addDoc(collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/savedAssignments`), {\n          age: assignmentAge,\n          topic: assignmentTopic,\n          content: generatedAssignmentContent,\n          answerKey: generatedAssignmentAnswerKey,\n          createdAt: new Date().toISOString()\n        });\n        displayModal(\"Success\", \"Assignment saved successfully!\");\n      } catch (error) {\n        console.error(\"Error saving assignment:\", error);\n        displayModal(\"Error\", \"Failed to save assignment.\");\n      }\n    } else {\n      displayModal(\"No Content\", \"Generate an assignment first before saving.\");\n    }\n  };\n  const printAssignment = (content, answerKey, topic, age) => {\n    const printWindow = window.open('', '', 'height=600,width=800');\n    printWindow.document.write('<html><head><title>Print Assignment</title>');\n    printWindow.document.write('<style>body { font-family: Arial, sans-serif; margin: 20px; }</style>');\n    printWindow.document.write('</head><body>');\n    printWindow.document.write(`<h1>Extra Credit / Busy Work Assignment</h1>`);\n    printWindow.document.write(`<h2>Topic: ${topic} (Grade ${age})</h2>`);\n    printWindow.document.write(`<h3>Assignment:</h3>`);\n    printWindow.document.write(`<pre style=\"white-space: pre-wrap; word-wrap: break-word;\">${content}</pre>`);\n    if (answerKey && answerKey !== \"No Answer Key Provided.\" && answerKey !== \"Could not parse distinct assignment or answer key sections.\") {\n      printWindow.document.write(`<h3>Answer Key:</h3>`);\n      printWindow.document.write(`<pre style=\"white-space: pre-wrap; word-wrap: break-word;\">${answerKey}</pre>`);\n    } else {\n      printWindow.document.write(`<p>No answer key available for printing.</p>`);\n    }\n    printWindow.document.close();\n    printWindow.print();\n  };\n  const deleteSavedAssignment = async assignmentId => {\n    if (currentDb && userId) {\n      try {\n        await deleteDoc(doc(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/savedAssignments`, assignmentId));\n        displayModal(\"Success\", \"Saved assignment deleted.\");\n      } catch (error) {\n        console.error(\"Error deleting saved assignment:\", error);\n        displayModal(\"Error\", \"Failed to delete saved assignment.\");\n      }\n    }\n  };\n\n  // --- Question Generator Functions ---\n  const generateQuestion = async () => {\n    setQuestionLoading(true);\n    setQuestionError('');\n    setGeneratedQuestion('');\n    setGeneratedAnswer('');\n    setShowQuestionAnswer(false); // Hide answer by default\n\n    const prompt = `Generate a challenging question and its answer for a ${questionGrade}th grade student on the topic of \"${questionTopic}\". Format the output as:\n    Question: [Your question here]\n    Answer: [Your answer here]`;\n    try {\n      let chatHistory = [];\n      chatHistory.push({\n        role: \"user\",\n        parts: [{\n          text: prompt\n        }]\n      });\n      const payload = {\n        contents: chatHistory\n      };\n      const apiKey = \"\"; // Canvas will provide this at runtime\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const result = await response.json();\n      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n        const text = result.candidates[0].content.parts[0].text;\n        const questionMarker = \"Question:\";\n        const answerMarker = \"Answer:\";\n        const questionIndex = text.indexOf(questionMarker);\n        const answerIndex = text.indexOf(answerMarker);\n        let questionContent = \"\";\n        let answerContent = \"\";\n        if (questionIndex !== -1) {\n          if (answerIndex !== -1 && answerIndex > questionIndex) {\n            questionContent = text.substring(questionIndex + questionMarker.length, answerIndex).trim();\n            answerContent = text.substring(answerIndex + answerMarker.length).trim();\n          } else {\n            questionContent = text.substring(questionIndex + questionMarker.length).trim();\n            answerContent = \"Could not parse answer. Please click 'Show Answer' to see full response.\";\n          }\n        } else if (answerIndex !== -1) {\n          questionContent = text.substring(0, answerIndex).trim();\n          answerContent = text.substring(answerIndex + answerMarker.length).trim();\n        } else {\n          questionContent = text.trim();\n          answerContent = \"Could not parse answer. Please click 'Show Answer' to see full response.\";\n        }\n        setGeneratedQuestion(questionContent);\n        setGeneratedAnswer(answerContent);\n      } else {\n        setQuestionError(\"Failed to generate question. Please try again.\");\n      }\n    } catch (err) {\n      console.error(\"Error generating question:\", err);\n      setQuestionError(\"An error occurred while generating the question. Please check your network connection.\");\n    } finally {\n      setQuestionLoading(false);\n    }\n  };\n\n  // --- Input Field Usability Enhancements ---\n  // Generic handler for \"Enter\" key press to trigger a function\n  const handleEnterKey = (event, actionFunction) => {\n    if (event.key === 'Enter') {\n      actionFunction();\n    }\n  };\n\n  // UI Components for each feature\n  const Dashboard = ({\n    setCurrentPage,\n    userId\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-white rounded-lg shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold text-gray-800 mb-6\",\n      children: \"Welcome, Teacher!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 768,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 mb-8\",\n      children: \"Manage your classroom with ease using the tools below.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 769,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentPage('admin-settings'),\n        className: \"bg-gray-700 hover:bg-gray-800 text-white font-semibold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-cog mr-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 775,\n          columnNumber: 11\n        }, this), \" Admin Settings\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 771,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentPage('library'),\n        className: \"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-book mr-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 781,\n          columnNumber: 11\n        }, this), \" In-Class Library\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 777,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentPage('selector'),\n        className: \"bg-green-600 hover:bg-green-700 text-white font-semibold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-users mr-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 787,\n          columnNumber: 11\n        }, this), \" Random Child Selector\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 783,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentPage('rewards'),\n        className: \"bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-star mr-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 793,\n          columnNumber: 11\n        }, this), \" Reward System\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 789,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentPage('assignments'),\n        className: \"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-clipboard-list mr-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 799,\n          columnNumber: 11\n        }, this), \" Extra Credit/Busy Work\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 795,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentPage('saved-assignments'),\n        className: \"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-save mr-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 805,\n          columnNumber: 11\n        }, this), \" Saved Assignments\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 801,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentPage('questions'),\n        className: \"bg-red-600 hover:bg-red-700 text-white font-semibold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-question-circle mr-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 811,\n          columnNumber: 11\n        }, this), \" Question Generator\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 807,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 770,\n      columnNumber: 7\n    }, this), userId && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 p-4 bg-gray-100 rounded-lg text-gray-700 text-sm\",\n      children: [\"Your User ID: \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-mono break-all\",\n        children: userId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 816,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 815,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 767,\n    columnNumber: 5\n  }, this);\n  const AdminSettings = ({\n    setCurrentPage,\n    students,\n    newStudentName,\n    setNewStudentName,\n    addStudent,\n    removeStudent,\n    newStudentNameRef\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-white rounded-lg shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold text-gray-800 mb-6\",\n      children: \"Admin Settings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 824,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 mb-4\",\n      children: \"Manage your students here. This list will be used across all other features.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 825,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-gray-700 mb-3\",\n        children: \"Manage Students\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 830,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: newStudentName,\n          onChange: e => {\n            setNewStudentName(e.target.value);\n          },\n          onKeyDown: e => handleEnterKey(e, addStudent),\n          placeholder: \"Enter student name\",\n          className: \"flex-grow p-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n          ref: newStudentNameRef // Ref for focus management\n          ,\n          autoFocus: true // AutoFocus for the first input on this page\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 832,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addStudent,\n          className: \"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-5 rounded-r-lg shadow-md transition duration-300 ease-in-out\",\n          children: \"Add Student\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 842,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 831,\n        columnNumber: 9\n      }, this), students.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3\",\n        children: students.map(student => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"flex flex-col items-start justify-between bg-white p-3 rounded-lg shadow-sm border border-gray-100\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between w-full items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-800 font-medium\",\n              children: student.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 854,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => removeStudent(student.id),\n              className: \"text-red-500 hover:text-red-700 text-lg transition duration-200\",\n              title: \"Remove student\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-times-circle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 860,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 855,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 853,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600 text-xs mt-1 break-all\",\n            children: [\"Barcode: \", student.barcode]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 863,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-700 text-sm mt-1\",\n            children: [\"PIN: \", student.pin]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 864,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-700 text-sm mt-1\",\n            children: [\"Points: \", student.points]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 865,\n            columnNumber: 17\n          }, this)]\n        }, student.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 852,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 850,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 italic\",\n        children: \"No students added yet. Add some to get started!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 870,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 829,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setCurrentPage('print-ids'),\n      className: \"mt-8 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-print mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 878,\n        columnNumber: 9\n      }, this), \" Print Student IDs\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 874,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setCurrentPage('dashboard'),\n      className: \"mt-8 ml-4 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n      children: \"Back to Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 881,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 823,\n    columnNumber: 5\n  }, this);\n  const PrintStudentIDs = ({\n    setCurrentPage,\n    students\n  }) => {\n    const printStudentList = () => {\n      const printWindow = window.open('', '', 'height=600,width=800');\n      printWindow.document.write('<html><head><title>Print Student IDs</title>');\n      printWindow.document.write('<style>');\n      printWindow.document.write(`\n        body { font-family: Arial, sans-serif; margin: 20px; }\n        .id-card {\n          border: 1px solid #ccc;\n          border-radius: 8px;\n          padding: 15px;\n          margin: 10px;\n          display: inline-block;\n          width: 280px; /* Adjust as needed for card size */\n          box-shadow: 2px 2px 5px rgba(0,0,0,0.1);\n          vertical-align: top;\n        }\n        .id-card h3 { margin-top: 0; margin-bottom: 5px; color: #333; }\n        .id-card p { margin: 3px 0; font-size: 0.9em; color: #555; word-break: break-all; }\n        .id-card .barcode-label { font-weight: bold; margin-top: 8px; }\n      `);\n      printWindow.document.write('</style>');\n      printWindow.document.write('</head><body>');\n      printWindow.document.write('<h1>Student ID Cards</h1>');\n      printWindow.document.write('<p>Cut along the lines to create individual student ID cards.</p><hr/>');\n      students.forEach(student => {\n        printWindow.document.write(`\n          <div class=\"id-card\">\n            <h3>${student.name}</h3>\n            <p class=\"barcode-label\">Barcode:</p>\n            <p>${student.barcode}</p>\n            <p class=\"barcode-label\">PIN:</p>\n            <p>${student.pin}</p>\n          </div>\n        `);\n      });\n      printWindow.document.write('</body></html>');\n      printWindow.document.close();\n      printWindow.print();\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 bg-white rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-bold text-gray-800 mb-6\",\n        children: \"Print Student IDs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 935,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-4\",\n        children: \"Generate a printable list of student names, barcodes, and PINs for creating ID cards.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 936,\n        columnNumber: 9\n      }, this), students.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-gray-700 mb-3\",\n          children: \"Student List for Printing:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 942,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\",\n          children: students.map(student => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-100\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-medium text-gray-800\",\n              children: student.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 946,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600 break-all\",\n              children: [\"Barcode: \", student.barcode]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 947,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"PIN: \", student.pin]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 948,\n              columnNumber: 19\n            }, this)]\n          }, student.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 945,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 943,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: printStudentList,\n          className: \"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-5 rounded-lg shadow-md transition duration-300 ease-in-out\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-print mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 956,\n            columnNumber: 15\n          }, this), \" Print All IDs\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 952,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 941,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 italic\",\n        children: \"No students added yet. Add students in Admin Settings to generate IDs.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 960,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentPage('admin-settings'),\n        className: \"mt-8 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n        children: \"Back to Admin Settings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 963,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 934,\n      columnNumber: 7\n    }, this);\n  };\n  const LibrarySystem = ({\n    setCurrentPage,\n    students,\n    books,\n    newBookISBN,\n    setNewBookISBN,\n    newBookTitle,\n    setNewBookTitle,\n    newBookAuthor,\n    setNewBookAuthor,\n    libraryStudentBarcodeInput,\n    setLibraryStudentBarcodeInput,\n    selectedBookForCheckout,\n    setSelectedBookForCheckout,\n    selectedBookForCheckin,\n    setSelectedBookForCheckin,\n    isbnSearchInput,\n    setIsbnSearchInput,\n    isbnSearchLoading,\n    setIsbnSearchLoading,\n    handleISBNLookup,\n    addBook,\n    checkoutBook,\n    checkinBook,\n    isbnSearchInputRef,\n    newBookISBNRef,\n    newBookTitleRef,\n    newBookAuthorRef,\n    libraryStudentBarcodeInputRef,\n    handleEnterKey\n  }) => {\n    const isBookLate = book => {\n      if (book.isAvailable || !book.checkoutDate) return false;\n      const checkoutDate = new Date(book.checkoutDate);\n      const sevenDaysAgo = new Date();\n      sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7); // Changed to 7 days\n      return checkoutDate < sevenDaysAgo;\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 bg-white rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-bold text-gray-800 mb-6\",\n        children: \"In-Class Library System\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 985,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-4\",\n        children: \"Manage your classroom library. Add books (manually or by ISBN search), check them out to students using their barcodes/PINs/names, and check them back in.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 986,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-gray-700 mb-3\",\n          children: \"Add New Book\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 992,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: isbnSearchInput,\n            onChange: e => {\n              setIsbnSearchInput(e.target.value);\n            },\n            onKeyDown: e => handleEnterKey(e, handleISBNLookup),\n            placeholder: \"Search by ISBN (e.g., 9780321765723)\",\n            className: \"flex-grow p-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n            ref: isbnSearchInputRef // Ref for focus management\n            ,\n            autoFocus: true // AutoFocus for the first input on this page\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 994,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleISBNLookup,\n            disabled: isbnSearchLoading,\n            className: `bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-r-lg shadow-md transition duration-300 ease-in-out ${isbnSearchLoading ? 'opacity-50 cursor-not-allowed' : ''}`,\n            children: isbnSearchLoading ? 'Searching...' : 'Search Book'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1004,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 993,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 text-sm mb-2\",\n          children: \"Or enter details manually:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1012,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: newBookISBN,\n          onChange: e => {\n            setNewBookISBN(e.target.value);\n          },\n          onKeyDown: e => {\n            if (e.key === 'Enter') newBookTitleRef.current.focus();\n          },\n          placeholder: \"ISBN (manual entry)\",\n          className: \"w-full p-2 mb-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n          ref: newBookISBNRef // Ref for focus management\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1013,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"newBookTitleInput\",\n          value: newBookTitle,\n          onChange: e => {\n            setNewBookTitle(e.target.value);\n          },\n          onKeyDown: e => {\n            if (e.key === 'Enter') newBookAuthorRef.current.focus();\n          },\n          placeholder: \"Book Title\",\n          className: \"w-full p-2 mb-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n          ref: newBookTitleRef // Ref for focus management\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1022,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"newBookAuthorInput\",\n          value: newBookAuthor,\n          onChange: e => {\n            setNewBookAuthor(e.target.value);\n          },\n          onKeyDown: e => handleEnterKey(e, addBook),\n          placeholder: \"Author\",\n          className: \"w-full p-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n          ref: newBookAuthorRef // Ref for focus management\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1032,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addBook,\n          className: \"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n          children: \"Add Book\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1042,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 991,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-gray-700 mb-3\",\n          children: \"Checkout Book\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1052,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedBookForCheckout ? selectedBookForCheckout.id : '',\n          onChange: e => setSelectedBookForCheckout(books.find(book => book.id === e.target.value)),\n          className: \"w-full p-2 mb-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Select a book to checkout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1058,\n            columnNumber: 13\n          }, this), books.filter(book => book.isAvailable).map(book => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: book.id,\n            children: [book.title, \" by \", book.author]\n          }, book.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1060,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1053,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: libraryStudentBarcodeInput,\n          onChange: e => {\n            setLibraryStudentBarcodeInput(e.target.value);\n          },\n          onKeyDown: e => handleEnterKey(e, checkoutBook),\n          placeholder: \"Scan/Enter Student Barcode, PIN, or Name\",\n          className: \"w-full p-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n          ref: libraryStudentBarcodeInputRef // Ref for focus management\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1063,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: checkoutBook,\n          disabled: !selectedBookForCheckout || !libraryStudentBarcodeInput,\n          className: `w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out ${!selectedBookForCheckout || !libraryStudentBarcodeInput ? 'opacity-50 cursor-not-allowed' : ''}`,\n          children: \"Checkout Book\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1072,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1051,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-gray-700 mb-3\",\n          children: \"Check-in Book\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1083,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedBookForCheckin ? selectedBookForCheckin.id : '',\n          onChange: e => setSelectedBookForCheckin(books.find(book => book.id === e.target.value)),\n          onKeyDown: e => handleEnterKey(e, checkinBook),\n          className: \"w-full p-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Select a book to check-in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1090,\n            columnNumber: 13\n          }, this), books.filter(book => !book.isAvailable).map(book => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: book.id,\n            children: [book.title, \" (by \", book.author, \") - Borrowed by \", book.currentBorrowerName]\n          }, book.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1092,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1084,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: checkinBook,\n          disabled: !selectedBookForCheckin,\n          className: `w-full bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out ${!selectedBookForCheckin ? 'opacity-50 cursor-not-allowed' : ''}`,\n          children: \"Check-in Book\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1095,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1082,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-2xl font-semibold text-gray-700 mb-4\",\n          children: \"Current Library Inventory\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1106,\n          columnNumber: 11\n        }, this), books.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full bg-white border border-gray-200 rounded-lg shadow-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"bg-gray-100 border-b\",\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-2 px-4 text-left text-sm font-medium text-gray-600\",\n                  children: \"Title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1112,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-2 px-4 text-left text-sm font-medium text-gray-600\",\n                  children: \"Author\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1113,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-2 px-4 text-left text-sm font-medium text-gray-600\",\n                  children: \"ISBN\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1114,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-2 px-4 text-left text-sm font-medium text-gray-600\",\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1115,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"py-2 px-4 text-left text-sm font-medium text-gray-600\",\n                  children: \"Borrowed By\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1116,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1111,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1110,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: books.map(book => /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: `border-b last:border-b-0 hover:bg-gray-50 ${isBookLate(book) ? 'bg-red-100' : ''}`,\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 text-sm text-gray-800\",\n                  children: book.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1122,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 text-sm text-gray-800\",\n                  children: book.author\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1123,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 text-sm text-gray-800\",\n                  children: book.isbn\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1124,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 text-sm text-gray-800\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `px-2 py-1 rounded-full text-xs font-semibold ${book.isAvailable ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`,\n                    children: book.isAvailable ? 'Available' : isBookLate(book) ? 'Late' : 'Loaned'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1126,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1125,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"py-2 px-4 text-sm text-gray-800\",\n                  children: book.currentBorrowerName || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1130,\n                  columnNumber: 23\n                }, this)]\n              }, book.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1121,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1119,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1109,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1108,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 italic\",\n          children: \"No books in the library yet. Add some!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1137,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentPage('dashboard'),\n        className: \"mt-8 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n        children: \"Back to Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1141,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 984,\n      columnNumber: 7\n    }, this);\n  };\n  const RandomChildSelector = ({\n    setCurrentPage,\n    students,\n    selectedStudents,\n    countdown,\n    pickingStudent,\n    currentPickedStudent,\n    startPickingStudent,\n    resetPickedStudents\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-white rounded-lg shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold text-gray-800 mb-6\",\n      children: \"Random Child Selector\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 mb-4\",\n      children: [\"This tool will pick a random student from your class list, and won't pick them again until everyone has had a turn. Manage students in \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-semibold text-gray-700\",\n        children: \"Admin Settings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1156,\n        columnNumber: 28\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mt-8\",\n      children: pickingStudent ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-5xl font-extrabold text-blue-600 animate-pulse\",\n        children: countdown > 0 ? countdown : 'Picking...'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1161,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [currentPickedStudent && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-4xl font-extrabold text-green-700 mb-6 p-4 bg-green-50 border border-green-200 rounded-lg shadow-inner animate-bounce\",\n          children: currentPickedStudent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1167,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startPickingStudent,\n          disabled: students.length === 0,\n          className: `bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-8 rounded-full shadow-xl transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-indigo-300 ${students.length === 0 ? 'opacity-50 cursor-not-allowed' : ''}`,\n          children: \"Pick Random Student\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1171,\n          columnNumber: 13\n        }, this), students.length > 0 && selectedStudents.length < students.length && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: resetPickedStudents,\n          className: \"ml-4 bg-gray-400 hover:bg-gray-500 text-white font-semibold py-3 px-6 rounded-full shadow-md transition duration-300 ease-in-out transform hover:scale-105\",\n          children: \"Reset All Students\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1179,\n          columnNumber: 15\n        }, this), selectedStudents.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-4 text-gray-600\",\n          children: [\"Students remaining for this round: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-bold\",\n            children: selectedStudents.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1188,\n            columnNumber: 52\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1187,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1159,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setCurrentPage('dashboard'),\n      className: \"mt-8 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n      children: \"Back to Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1195,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1152,\n    columnNumber: 5\n  }, this);\n  const RewardSystem = ({\n    setCurrentPage,\n    students,\n    rewardItems,\n    newRewardItemName,\n    setNewRewardItemName,\n    newRewardItemCost,\n    setNewRewardItemCost,\n    newRewardItemQuantity,\n    setNewRewardItemQuantity,\n    rewardStudentSearchInput,\n    setRewardStudentSearchInput,\n    currentRewardStudent,\n    setCurrentRewardStudent,\n    pointsToAdd,\n    setPointsToAdd,\n    selectedRewardItem,\n    setSelectedRewardItem,\n    addRewardItem,\n    handleRewardStudentLookup,\n    addPoints,\n    checkoutRewardItem,\n    rewardStudentSearchInputRef,\n    pointsToAddRef,\n    newRewardItemNameRef,\n    newRewardItemCostRef,\n    newRewardItemQuantityRef,\n    handleEnterKey\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-white rounded-lg shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold text-gray-800 mb-6\",\n      children: \"Reward System\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1206,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 mb-4\",\n      children: [\"Award points to students by scanning their badge, and let them redeem points for inventory items. Manage students in \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-semibold text-gray-700\",\n        children: \"Admin Settings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1209,\n        columnNumber: 28\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1207,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-gray-700 mb-3\",\n        children: \"Student Lookup (Scan Badge, PIN, or Name)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: rewardStudentSearchInput,\n          onChange: e => {\n            setRewardStudentSearchInput(e.target.value);\n          },\n          onKeyDown: e => handleEnterKey(e, handleRewardStudentLookup),\n          placeholder: \"Scan/Enter Student Barcode, PIN, or Name\",\n          className: \"flex-grow p-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n          ref: rewardStudentSearchInputRef // Ref for focus management\n          ,\n          autoFocus: true // AutoFocus for the first input on this page\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleRewardStudentLookup,\n          className: \"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-r-lg shadow-md transition duration-300 ease-in-out\",\n          children: \"Lookup Student\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1226,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1215,\n        columnNumber: 9\n      }, this), currentRewardStudent ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-800 mt-2\",\n        children: [\"Selected Student: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-bold\",\n          children: currentRewardStudent.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1235,\n          columnNumber: 31\n        }, this), \" (Points: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-bold text-green-700\",\n          children: currentRewardStudent.points\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1235,\n          columnNumber: 103\n        }, this), \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1234,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 italic mt-2\",\n        children: \"No student selected.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1238,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1213,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-gray-700 mb-3\",\n        children: \"Add Points\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1244,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: pointsToAdd,\n          onChange: e => {\n            setPointsToAdd(e.target.value);\n          },\n          onKeyDown: e => handleEnterKey(e, addPoints),\n          placeholder: \"Points to add\",\n          className: \"flex-grow p-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-green-500\",\n          ref: pointsToAddRef // Ref for focus management\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addPoints,\n          disabled: !currentRewardStudent || !pointsToAdd || isNaN(parseInt(pointsToAdd)) || parseInt(pointsToAdd) <= 0,\n          className: `bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-r-lg shadow-md transition duration-300 ease-in-out ${!currentRewardStudent || !pointsToAdd || isNaN(parseInt(pointsToAdd)) || parseInt(pointsToAdd) <= 0 ? 'opacity-50 cursor-not-allowed' : ''}`,\n          children: \"Add Points\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1255,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1245,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1243,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-gray-700 mb-3\",\n        children: \"Add Reward Item to Inventory\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1267,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newRewardItemName,\n        onChange: e => {\n          setNewRewardItemName(e.target.value);\n        },\n        onKeyDown: e => {\n          if (e.key === 'Enter') newRewardItemCostRef.current.focus();\n        },\n        placeholder: \"Item Name (e.g., Pencil, Sticker)\",\n        className: \"w-full p-2 mb-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n        ref: newRewardItemNameRef // Ref for focus management\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1268,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        id: \"newRewardItemCostInput\",\n        value: newRewardItemCost,\n        onChange: e => {\n          setNewRewardItemCost(e.target.value);\n        },\n        onKeyDown: e => {\n          if (e.key === 'Enter') newRewardItemQuantityRef.current.focus();\n        },\n        placeholder: \"Point Cost\",\n        className: \"w-full p-2 mb-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n        ref: newRewardItemCostRef // Ref for focus management\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1277,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        id: \"newRewardItemQuantityInput\",\n        value: newRewardItemQuantity,\n        onChange: e => {\n          setNewRewardItemQuantity(e.target.value);\n        },\n        onKeyDown: e => handleEnterKey(e, addRewardItem),\n        placeholder: \"Quantity\",\n        className: \"w-full p-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n        ref: newRewardItemQuantityRef // Ref for focus management\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1287,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addRewardItem,\n        className: \"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n        children: \"Add Item\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1297,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1266,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-gray-700 mb-3\",\n        children: \"Checkout Reward Item\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1307,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedRewardItem ? selectedRewardItem.id : '',\n        onChange: e => setSelectedRewardItem(rewardItems.find(item => item.id === e.target.value)),\n        onKeyDown: e => handleEnterKey(e, checkoutRewardItem),\n        className: \"w-full p-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Select an item to checkout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1314,\n          columnNumber: 11\n        }, this), rewardItems.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: item.id,\n          children: [item.name, \" (\", item.cost, \" pts) - Qty: \", item.quantity]\n        }, item.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1316,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1308,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: checkoutRewardItem,\n        disabled: !currentRewardStudent || !selectedRewardItem,\n        className: `w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out ${!currentRewardStudent || !selectedRewardItem ? 'opacity-50 cursor-not-allowed' : ''}`,\n        children: \"Redeem Item\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1319,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1306,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-2xl font-semibold text-gray-700 mb-4\",\n        children: \"Current Reward Inventory\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1330,\n        columnNumber: 9\n      }, this), rewardItems.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full bg-white border border-gray-200 rounded-lg shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"bg-gray-100 border-b\",\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 text-left text-sm font-medium text-gray-600\",\n                children: \"Item Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1336,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 text-left text-sm font-medium text-gray-600\",\n                children: \"Point Cost\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1337,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"py-2 px-4 text-left text-sm font-medium text-gray-600\",\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1338,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1335,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1334,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: rewardItems.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"border-b last:border-b-0 hover:bg-gray-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 text-sm text-gray-800\",\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1344,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 text-sm text-gray-800\",\n                children: item.cost\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1345,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"py-2 px-4 text-sm text-gray-800\",\n                children: item.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1346,\n                columnNumber: 21\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1343,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1341,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1333,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1332,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 italic\",\n        children: \"No reward items in inventory yet. Add some!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1353,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1329,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setCurrentPage('dashboard'),\n      className: \"mt-8 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n      children: \"Back to Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1357,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1205,\n    columnNumber: 5\n  }, this);\n  const ExtraCreditPortal = ({\n    setCurrentPage,\n    assignmentAge,\n    setAssignmentAge,\n    assignmentTopic,\n    setAssignmentTopic,\n    generatedAssignmentContent,\n    setGeneratedAssignmentContent,\n    generatedAssignmentAnswerKey,\n    setGeneratedAssignmentAnswerKey,\n    showAssignmentAnswerKey,\n    setShowAssignmentAnswerKey,\n    generatingAssignment,\n    setGeneratingAssignment,\n    assignmentGenerationError,\n    setAssignmentGenerationError,\n    generateAssignment,\n    saveAssignment,\n    printAssignment,\n    assignmentTopicRef,\n    handleEnterKey\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-white rounded-lg shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold text-gray-800 mb-6\",\n      children: \"Extra Credit / Busy Work Portal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1368,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 mb-4\",\n      children: \"Generate printable extra credit or busy work assignments for your students.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1369,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-gray-700 mb-3\",\n        children: \"Generate New Assignment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1374,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"assignmentAge\",\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Grade Level:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1377,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"assignmentAge\",\n            value: assignmentAge,\n            onChange: e => setAssignmentAge(e.target.value),\n            className: \"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n            children: [...Array(12)].map((_, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: i + 1,\n              children: i + 1\n            }, i + 1, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1385,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1378,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1376,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"assignmentTopic\",\n            className: \"block text-sm font-medium text-gray-700 mb-1\",\n            children: \"Topic:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1390,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"assignmentTopic\",\n            value: assignmentTopic,\n            onChange: e => {\n              setAssignmentTopic(e.target.value);\n            },\n            onKeyDown: e => handleEnterKey(e, generateAssignment),\n            placeholder: \"e.g., Math, Science, Art\",\n            className: \"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n            ref: assignmentTopicRef // Ref for focus management\n            ,\n            autoFocus: true // AutoFocus for the first input on this page\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1391,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1389,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1375,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: generateAssignment,\n        disabled: generatingAssignment || !assignmentTopic.trim(),\n        className: `w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-5 rounded-lg shadow-md transition duration-300 ease-in-out ${generatingAssignment || !assignmentTopic.trim() ? 'opacity-50 cursor-not-allowed' : ''}`,\n        children: generatingAssignment ? 'Generating...' : 'Generate Assignment'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1404,\n        columnNumber: 9\n      }, this), assignmentGenerationError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500 mt-3 text-center\",\n        children: assignmentGenerationError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1411,\n        columnNumber: 39\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1373,\n      columnNumber: 7\n    }, this), generatedAssignmentContent && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg shadow-inner\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-indigo-800 mb-2\",\n        children: \"Generated Assignment:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1416,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-gray-800 mb-4 whitespace-pre-wrap\",\n        children: generatedAssignmentContent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1417,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-indigo-800 mb-2\",\n        children: \"Answer Key:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1419,\n        columnNumber: 11\n      }, this), showAssignmentAnswerKey ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-gray-800 mb-4 whitespace-pre-wrap\",\n        children: generatedAssignmentAnswerKey\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1421,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowAssignmentAnswerKey(true),\n        className: \"bg-gray-400 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out mb-4\",\n        children: \"Show Answer Key\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1423,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-4 mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => printAssignment(generatedAssignmentContent, generatedAssignmentAnswerKey, assignmentTopic, assignmentAge),\n          className: \"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n          children: \"Print Assignment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1432,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: saveAssignment,\n          className: \"bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n          children: \"Save Assignment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1438,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1431,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1415,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setCurrentPage('dashboard'),\n      className: \"mt-8 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n      children: \"Back to Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1448,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1367,\n    columnNumber: 5\n  }, this);\n  const SavedAssignments = ({\n    setCurrentPage,\n    savedAssignments,\n    printAssignment,\n    deleteSavedAssignment\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-white rounded-lg shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold text-gray-800 mb-6\",\n      children: \"Saved Assignments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1459,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 mb-4\",\n      children: \"Here you can find all the assignments you have saved.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1460,\n      columnNumber: 7\n    }, this), savedAssignments.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",\n      children: savedAssignments.map(assignment => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200 flex flex-col justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800 mb-2\",\n            children: [assignment.topic, \" (Grade \", assignment.age, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1469,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mb-3\",\n            children: [\"Saved: \", new Date(assignment.createdAt).toLocaleDateString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1470,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-700 line-clamp-3\",\n            children: assignment.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1471,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1468,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 flex flex-wrap gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => printAssignment(assignment.content, assignment.answerKey, assignment.topic, assignment.age),\n            className: \"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-3 rounded-lg text-sm shadow-md transition duration-300 ease-in-out\",\n            children: \"Print\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1474,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => deleteSavedAssignment(assignment.id),\n            className: \"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-3 rounded-lg text-sm shadow-md transition duration-300 ease-in-out\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1480,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1473,\n          columnNumber: 15\n        }, this)]\n      }, assignment.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1467,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1465,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-500 italic\",\n      children: \"No assignments saved yet. Generate and save some from the \\\"Extra Credit / Busy Work Portal\\\"!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1491,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setCurrentPage('dashboard'),\n      className: \"mt-8 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n      children: \"Back to Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1494,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1458,\n    columnNumber: 5\n  }, this);\n  const QuestionGenerator = ({\n    setCurrentPage,\n    questionGrade,\n    setQuestionGrade,\n    questionTopic,\n    setQuestionTopic,\n    generatedQuestion,\n    setGeneratedQuestion,\n    generatedAnswer,\n    setGeneratedAnswer,\n    showQuestionAnswer,\n    setShowQuestionAnswer,\n    questionLoading,\n    setQuestionLoading,\n    questionError,\n    setQuestionError,\n    generateQuestion,\n    questionTopicRef,\n    handleEnterKey\n  }) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 bg-white rounded-lg shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-bold text-gray-800 mb-6\",\n        children: \"Random Question Generator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1507,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-4\",\n        children: \"Generate questions and answers for different grades and topics using AI.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1508,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-gray-700 mb-3\",\n          children: \"Generate New Question\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1513,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"questionGrade\",\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Grade Level:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1516,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"questionGrade\",\n              value: questionGrade,\n              onChange: e => setQuestionGrade(e.target.value),\n              className: \"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              children: [...Array(12)].map((_, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: i + 1,\n                children: i + 1\n              }, i + 1, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1524,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1517,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1515,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"questionTopic\",\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Topic:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1529,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"questionTopic\",\n              value: questionTopic,\n              onChange: e => {\n                setQuestionTopic(e.target.value);\n              },\n              onKeyDown: e => handleEnterKey(e, generateQuestion),\n              placeholder: \"e.g., Algebra, History, Biology\",\n              className: \"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",\n              ref: questionTopicRef // Ref for focus management\n              ,\n              autoFocus: true // AutoFocus for the first input on this page\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1530,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1528,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1514,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: generateQuestion,\n          disabled: questionLoading || !questionTopic.trim(),\n          className: `w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-5 rounded-lg shadow-md transition duration-300 ease-in-out ${questionLoading || !questionTopic.trim() ? 'opacity-50 cursor-not-allowed' : ''}`,\n          children: questionLoading ? 'Generating...' : 'Generate Question'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1543,\n          columnNumber: 11\n        }, this), questionError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-500 mt-3 text-center\",\n          children: questionError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1550,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1512,\n        columnNumber: 9\n      }, this), generatedQuestion && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg shadow-inner\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-indigo-800 mb-2\",\n          children: \"Generated Question:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1555,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-800 mb-4\",\n          children: generatedQuestion\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1556,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-indigo-800 mb-2\",\n          children: \"Answer:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1557,\n          columnNumber: 13\n        }, this), showQuestionAnswer ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-800\",\n          children: generatedAnswer\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1559,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowQuestionAnswer(true),\n          className: \"bg-gray-400 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n          children: \"Show Answer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1561,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1554,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setCurrentPage('dashboard'),\n        className: \"mt-8 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n        children: \"Back to Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1571,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1506,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Custom Modal Component (replaces alert/confirm)\n  const CustomModal = ({\n    title,\n    message,\n    onClose\n  }) => {\n    if (!showModal) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-6 rounded-lg shadow-xl max-w-sm w-full mx-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold text-gray-800 mb-4\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1587,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-700 mb-6 break-words\",\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1588,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\",\n          children: \"OK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1589,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1586,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1585,\n      columnNumber: 7\n    }, this);\n  };\n  const renderPage = () => {\n    switch (currentPage) {\n      case 'dashboard':\n        return /*#__PURE__*/_jsxDEV(Dashboard, {\n          setCurrentPage: setCurrentPage,\n          userId: userId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1603,\n          columnNumber: 16\n        }, this);\n      case 'admin-settings':\n        return /*#__PURE__*/_jsxDEV(AdminSettings, {\n          setCurrentPage: setCurrentPage,\n          students: students,\n          newStudentName: newStudentName,\n          setNewStudentName: setNewStudentName,\n          addStudent: addStudent,\n          removeStudent: removeStudent,\n          newStudentNameRef: newStudentNameRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1605,\n          columnNumber: 16\n        }, this);\n      case 'print-ids':\n        return /*#__PURE__*/_jsxDEV(PrintStudentIDs, {\n          setCurrentPage: setCurrentPage,\n          students: students\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1607,\n          columnNumber: 16\n        }, this);\n      case 'library':\n        return /*#__PURE__*/_jsxDEV(LibrarySystem, {\n          setCurrentPage: setCurrentPage,\n          students: students,\n          books: books,\n          newBookISBN: newBookISBN,\n          setNewBookISBN: setNewBookISBN,\n          newBookTitle: newBookTitle,\n          setNewBookTitle: setNewBookTitle,\n          newBookAuthor: newBookAuthor,\n          setNewBookAuthor: setNewBookAuthor,\n          libraryStudentBarcodeInput: libraryStudentBarcodeInput,\n          setLibraryStudentBarcodeInput: setLibraryStudentBarcodeInput,\n          selectedBookForCheckout: selectedBookForCheckout,\n          setSelectedBookForCheckout: setSelectedBookForCheckout,\n          selectedBookForCheckin: selectedBookForCheckin,\n          setSelectedBookForCheckin: setSelectedBookForCheckin,\n          isbnSearchInput: isbnSearchInput,\n          setIsbnSearchInput: setIsbnSearchInput,\n          isbnSearchLoading: isbnSearchLoading,\n          setIsbnSearchLoading: setIsbnSearchLoading,\n          handleISBNLookup: handleISBNLookup,\n          addBook: addBook,\n          checkoutBook: checkoutBook,\n          checkinBook: checkinBook,\n          isbnSearchInputRef: isbnSearchInputRef,\n          newBookISBNRef: newBookISBNRef,\n          newBookTitleRef: newBookTitleRef,\n          newBookAuthorRef: newBookAuthorRef,\n          libraryStudentBarcodeInputRef: libraryStudentBarcodeInputRef,\n          handleEnterKey: handleEnterKey\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1609,\n          columnNumber: 16\n        }, this);\n      case 'selector':\n        return /*#__PURE__*/_jsxDEV(RandomChildSelector, {\n          setCurrentPage: setCurrentPage,\n          students: students,\n          selectedStudents: selectedStudents,\n          countdown: countdown,\n          pickingStudent: pickingStudent,\n          currentPickedStudent: currentPickedStudent,\n          startPickingStudent: startPickingStudent,\n          resetPickedStudents: resetPickedStudents\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1611,\n          columnNumber: 16\n        }, this);\n      case 'rewards':\n        return /*#__PURE__*/_jsxDEV(RewardSystem, {\n          setCurrentPage: setCurrentPage,\n          students: students,\n          rewardItems: rewardItems,\n          newRewardItemName: newRewardItemName,\n          setNewRewardItemName: setNewRewardItemName,\n          newRewardItemCost: newRewardItemCost,\n          setNewRewardItemCost: setNewRewardItemCost,\n          newRewardItemQuantity: newRewardItemQuantity,\n          setNewRewardItemQuantity: setNewRewardItemQuantity,\n          rewardStudentSearchInput: rewardStudentSearchInput,\n          setRewardStudentSearchInput: setRewardStudentSearchInput,\n          currentRewardStudent: currentRewardStudent,\n          setCurrentRewardStudent: setCurrentRewardStudent,\n          pointsToAdd: pointsToAdd,\n          setPointsToAdd: setPointsToAdd,\n          selectedRewardItem: selectedRewardItem,\n          setSelectedRewardItem: setSelectedRewardItem,\n          addRewardItem: addRewardItem,\n          handleRewardStudentLookup: handleRewardStudentLookup,\n          addPoints: addPoints,\n          checkoutRewardItem: checkoutRewardItem,\n          rewardStudentSearchInputRef: rewardStudentSearchInputRef,\n          pointsToAddRef: pointsToAddRef,\n          newRewardItemNameRef: newRewardItemNameRef,\n          newRewardItemCostRef: newRewardItemCostRef,\n          newRewardItemQuantityRef: newRewardItemQuantityRef,\n          handleEnterKey: handleEnterKey\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1613,\n          columnNumber: 16\n        }, this);\n      case 'assignments':\n        return /*#__PURE__*/_jsxDEV(ExtraCreditPortal, {\n          setCurrentPage: setCurrentPage,\n          assignmentAge: assignmentAge,\n          setAssignmentAge: setAssignmentAge,\n          assignmentTopic: assignmentTopic,\n          setAssignmentTopic: setAssignmentTopic,\n          generatedAssignmentContent: generatedAssignmentContent,\n          setGeneratedAssignmentContent: setGeneratedAssignmentContent,\n          generatedAssignmentAnswerKey: generatedAssignmentAnswerKey,\n          setGeneratedAssignmentAnswerKey: setGeneratedAssignmentAnswerKey,\n          showAssignmentAnswerKey: showAssignmentAnswerKey,\n          setShowAssignmentAnswerKey: setShowAssignmentAnswerKey,\n          generatingAssignment: generatingAssignment,\n          setGeneratingAssignment: setGeneratingAssignment,\n          assignmentGenerationError: assignmentGenerationError,\n          setAssignmentGenerationError: setAssignmentGenerationError,\n          generateAssignment: generateAssignment,\n          saveAssignment: saveAssignment,\n          printAssignment: printAssignment,\n          assignmentTopicRef: assignmentTopicRef,\n          handleEnterKey: handleEnterKey\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1615,\n          columnNumber: 16\n        }, this);\n      case 'saved-assignments':\n        return /*#__PURE__*/_jsxDEV(SavedAssignments, {\n          setCurrentPage: setCurrentPage,\n          savedAssignments: savedAssignments,\n          printAssignment: printAssignment,\n          deleteSavedAssignment: deleteSavedAssignment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1617,\n          columnNumber: 16\n        }, this);\n      case 'questions':\n        return /*#__PURE__*/_jsxDEV(QuestionGenerator, {\n          setCurrentPage: setCurrentPage,\n          questionGrade: questionGrade,\n          setQuestionGrade: setQuestionGrade,\n          questionTopic: questionTopic,\n          setQuestionTopic: setQuestionTopic,\n          generatedQuestion: generatedQuestion,\n          setGeneratedQuestion: setGeneratedQuestion,\n          generatedAnswer: generatedAnswer,\n          setGeneratedAnswer: setGeneratedAnswer,\n          showQuestionAnswer: showQuestionAnswer,\n          setShowQuestionAnswer: setShowQuestionAnswer,\n          questionLoading: questionLoading,\n          setQuestionLoading: setQuestionLoading,\n          questionError: questionError,\n          setQuestionError: setQuestionError,\n          generateQuestion: generateQuestion,\n          questionTopicRef: questionTopicRef,\n          handleEnterKey: handleEnterKey\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1619,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(Dashboard, {\n          setCurrentPage: setCurrentPage,\n          userId: userId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1621,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 flex items-center justify-center p-4 font-sans antialiased\",\n    children: [renderPage(), /*#__PURE__*/_jsxDEV(CustomModal, {\n      title: modalTitle,\n      message: modalMessage,\n      onClose: closeModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1628,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1626,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"c8BmVyzl+P00zZbmgIY9aCQSSLI=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","auth","db","signInAnonymously","signInWithCustomToken","onAuthStateChanged","onSnapshot","collection","doc","deleteDoc","query","where","getDocs","addDoc","updateDoc","APP_ID_FOR_FIRESTORE","Dashboard","AdminSettings","PrintStudentIDs","LibrarySystem","RandomChildSelector","RewardSystem","ExtraCreditPortal","SavedAssignments","QuestionGenerator","CustomModal","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","currentDb","setCurrentDb","currentAuth","setCurrentAuth","userId","setUserId","isAuthReady","setIsAuthReady","currentPage","setCurrentPage","students","setStudents","newStudentName","setNewStudentName","selectedStudents","setSelectedStudents","countdown","setCountdown","pickingStudent","setPickingStudent","currentPickedStudent","setCurrentPickedStudent","countdownIntervalRef","books","setBooks","newBookISBN","setNewBookISBN","newBookTitle","setNewBookTitle","newBookAuthor","setNewBookAuthor","libraryStudentBarcodeInput","setLibraryStudentBarcodeInput","selectedBookForCheckout","setSelectedBookForCheckout","selectedBookForCheckin","setSelectedBookForCheckin","isbnSearchInput","setIsbnSearchInput","isbnSearchLoading","setIsbnSearchLoading","rewardItems","setRewardItems","newRewardItemName","setNewRewardItemName","newRewardItemCost","setNewRewardItemCost","newRewardItemQuantity","setNewRewardItemQuantity","rewardStudentSearchInput","setRewardStudentSearchInput","currentRewardStudent","setCurrentRewardStudent","pointsToAdd","setPointsToAdd","selectedRewardItem","setSelectedRewardItem","assignmentAge","setAssignmentAge","assignmentTopic","setAssignmentTopic","generatedAssignmentContent","setGeneratedAssignmentContent","generatedAssignmentAnswerKey","setGeneratedAssignmentAnswerKey","showAssignmentAnswerKey","setShowAssignmentAnswerKey","generatingAssignment","setGeneratingAssignment","assignmentGenerationError","setAssignmentGenerationError","savedAssignments","setSavedAssignments","questionGrade","setQuestionGrade","questionTopic","setQuestionTopic","generatedQuestion","setGeneratedQuestion","generatedAnswer","setGeneratedAnswer","showQuestionAnswer","setShowQuestionAnswer","questionLoading","setQuestionLoading","questionError","setQuestionError","showModal","setShowModal","modalTitle","setModalTitle","modalMessage","setModalMessage","newStudentNameRef","isbnSearchInputRef","newBookISBNRef","newBookTitleRef","newBookAuthorRef","libraryStudentBarcodeInputRef","rewardStudentSearchInputRef","pointsToAddRef","newRewardItemNameRef","newRewardItemCostRef","newRewardItemQuantityRef","assignmentTopicRef","questionTopicRef","displayModal","title","message","closeModal","unsubscribe","user","uid","studentsCollectionRef","unsubscribeStudents","snapshot","studentList","docs","map","id","data","error","console","booksCollectionRef","unsubscribeBooks","bookList","rewardItemsCollectionRef","unsubscribeRewardItems","itemList","savedAssignmentsCollectionRef","unsubscribeSavedAssignments","assignmentList","addStudent","trim","studentBarcode","crypto","randomUUID","substring","toUpperCase","studentPin","isPinUnique","attempts","existingPins","s","pin","randomPin","Math","floor","random","toString","includes","name","barcode","points","removeStudent","studentId","searchStudent","searchTerm","lowerCaseSearchTerm","toLowerCase","q","querySnapshot","empty","allStudentsSnapshot","matchedStudent","find","startPickingStudent","length","current","setInterval","prev","clearInterval","pickRandomStudent","setTimeout","randomIndex","picked","updatedSelected","filter","resetPickedStudents","handleISBNLookup","response","fetch","json","items","bookInfo","volumeInfo","authors","join","addBook","isbn","author","isAvailable","currentBorrowerId","currentBorrowerName","checkoutDate","checkoutBook","student","Date","toISOString","checkinBook","addRewardItem","cost","parseInt","quantity","isNaN","handleRewardStudentLookup","addPoints","updatedStudent","checkoutRewardItem","generateAssignment","prompt","chatHistory","push","role","parts","text","payload","contents","apiKey","apiUrl","method","headers","body","JSON","stringify","result","candidates","content","assignmentMarker","answerKeyMarker","assignmentIndex","indexOf","answerKeyIndex","assignmentContent","answerKeyContent","err","saveAssignment","age","topic","answerKey","createdAt","printAssignment","printWindow","window","open","document","write","close","print","deleteSavedAssignment","assignmentId","generateQuestion","questionMarker","answerMarker","questionIndex","answerIndex","questionContent","answerContent","handleEnterKey","event","actionFunction","key","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","type","value","onChange","e","target","onKeyDown","placeholder","ref","autoFocus","printStudentList","forEach","isBookLate","book","sevenDaysAgo","setDate","getDate","disabled","focus","item","htmlFor","Array","_","i","assignment","toLocaleDateString","onClose","renderPage","_c","$RefreshReg$"],"sources":["C:/Users/Student/Documents/workspace/SideProjects/chelsealrose_side_projects/teacher-toolbox/src/App.jsx"],"sourcesContent":["// src/App.jsx\nimport React, { useState, useEffect, useRef } from 'react';\nimport {\n  auth,\n  db,\n  signInAnonymously,\n  signInWithCustomToken,\n  onAuthStateChanged,\n  onSnapshot,\n  collection,\n  doc,\n  deleteDoc,\n  query,\n  where,\n  getDocs,\n  addDoc,\n  updateDoc,\n  APP_ID_FOR_FIRESTORE\n} from './firebaseConfig'; // Import from your firebaseConfig.js\n\n// Import individual components\nimport Dashboard from './components/Dashboard';\nimport AdminSettings from './components/AdminSettings';\nimport PrintStudentIDs from './components/PrintStudentIDs';\nimport LibrarySystem from './components/LibrarySystem';\nimport RandomChildSelector from './components/RandomChildSelector';\nimport RewardSystem from './components/RewardSystem';\nimport ExtraCreditPortal from './components/ExtraCreditPortal';\nimport SavedAssignments from './components/SavedAssignments';\nimport QuestionGenerator from './components/QuestionGenerator';\nimport CustomModal from './components/CustomModal';\n\n\nconst App = () => {\n  const [currentDb, setCurrentDb] = useState(null); // Renamed to avoid conflict with imported 'db'\n  const [currentAuth, setCurrentAuth] = useState(null); // Renamed to avoid conflict with imported 'auth'\n  const [userId, setUserId] = useState(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [currentPage, setCurrentPage] = useState('dashboard');\n\n  // Student Management (Random Child Selector & Rewards)\n  const [students, setStudents] = useState([]);\n  const [newStudentName, setNewStudentName] = useState('');\n  const [selectedStudents, setSelectedStudents] = useState([]); // For random selector\n  const [countdown, setCountdown] = useState(3);\n  const [pickingStudent, setPickingStudent] = useState(false);\n  const [currentPickedStudent, setCurrentPickedStudent] = useState(null);\n  const countdownIntervalRef = useRef(null);\n\n  // Library System\n  const [books, setBooks] = useState([]);\n  const [newBookISBN, setNewBookISBN] = useState('');\n  const [newBookTitle, setNewBookTitle] = useState('');\n  const [newBookAuthor, setNewBookAuthor] = useState('');\n  const [libraryStudentBarcodeInput, setLibraryStudentBarcodeInput] = useState('');\n  const [selectedBookForCheckout, setSelectedBookForCheckout] = useState(null);\n  const [selectedBookForCheckin, setSelectedBookForCheckin] = useState(null);\n  const [isbnSearchInput, setIsbnSearchInput] = useState('');\n  const [isbnSearchLoading, setIsbnSearchLoading] = useState(false);\n\n  // Reward System\n  const [rewardItems, setRewardItems] = useState([]);\n  const [newRewardItemName, setNewRewardItemName] = useState('');\n  const [newRewardItemCost, setNewRewardItemCost] = useState('');\n  const [newRewardItemQuantity, setNewRewardItemQuantity] = useState('');\n  const [rewardStudentSearchInput, setRewardStudentSearchInput] = useState('');\n  const [currentRewardStudent, setCurrentRewardStudent] = useState(null);\n  const [pointsToAdd, setPointsToAdd] = useState('');\n  const [selectedRewardItem, setSelectedRewardItem] = useState(null);\n\n  // Extra Credit / Busy Work Portal\n  const [assignmentAge, setAssignmentAge] = useState('1');\n  const [assignmentTopic, setAssignmentTopic] = useState('');\n  const [generatedAssignmentContent, setGeneratedAssignmentContent] = useState('');\n  const [generatedAssignmentAnswerKey, setGeneratedAssignmentAnswerKey] = useState('');\n  const [showAssignmentAnswerKey, setShowAssignmentAnswerKey] = useState(false);\n  const [generatingAssignment, setGeneratingAssignment] = useState(false);\n  const [assignmentGenerationError, setAssignmentGenerationError] = useState('');\n  const [savedAssignments, setSavedAssignments] = useState([]);\n\n  // Question Generator\n  const [questionGrade, setQuestionGrade] = useState('1');\n  const [questionTopic, setQuestionTopic] = useState('');\n  const [generatedQuestion, setGeneratedQuestion] = useState('');\n  const [generatedAnswer, setGeneratedAnswer] = useState('');\n  const [showQuestionAnswer, setShowQuestionAnswer] = useState(false);\n  const [questionLoading, setQuestionLoading] = useState(false);\n  const [questionError, setQuestionError] = useState('');\n\n  // Global Modal for messages (replaces alert)\n  const [showModal, setShowModal] = useState(false);\n  const [modalTitle, setModalTitle] = useState('');\n  const [modalMessage, setModalMessage] = useState('');\n\n  // Refs for input fields to manage focus (removed onChange focus calls)\n  const newStudentNameRef = useRef(null);\n  const isbnSearchInputRef = useRef(null);\n  const newBookISBNRef = useRef(null);\n  const newBookTitleRef = useRef(null);\n  const newBookAuthorRef = useRef(null);\n  const libraryStudentBarcodeInputRef = useRef(null);\n  const rewardStudentSearchInputRef = useRef(null);\n  const pointsToAddRef = useRef(null);\n  const newRewardItemNameRef = useRef(null);\n  const newRewardItemCostRef = useRef(null);\n  const newRewardItemQuantityRef = useRef(null);\n  const assignmentTopicRef = useRef(null);\n  const questionTopicRef = useRef(null);\n\n\n  const displayModal = (title, message) => {\n    setModalTitle(title);\n    setModalMessage(message);\n    setShowModal(true);\n  };\n\n  const closeModal = () => {\n    setShowModal(false);\n    setModalTitle('');\n    setModalMessage('');\n  };\n\n  // Firebase Initialization and Authentication\n  useEffect(() => {\n    setCurrentDb(db); // Set the imported db to state\n    setCurrentAuth(auth); // Set the imported auth to state\n\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\n      if (user) {\n        setUserId(user.uid);\n      } else {\n        // For local development, sign in anonymously if no user\n        await signInAnonymously(auth);\n      }\n      setIsAuthReady(true);\n    });\n\n    return () => unsubscribe(); // Cleanup auth listener\n  }, []); // Run only once on component mount\n\n  // Fetch all data when auth is ready and userId is available\n  useEffect(() => {\n    if (currentDb && userId && isAuthReady) {\n      // Fetch Students\n      const studentsCollectionRef = collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`);\n      const unsubscribeStudents = onSnapshot(studentsCollectionRef, (snapshot) => {\n        const studentList = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n        setStudents(studentList);\n        setSelectedStudents(studentList); // Initialize selected students for random selector\n      }, (error) => {\n        console.error(\"Error fetching students:\", error);\n        displayModal(\"Data Error\", \"Failed to load student data.\");\n      });\n\n      // Fetch Books\n      const booksCollectionRef = collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/books`);\n      const unsubscribeBooks = onSnapshot(booksCollectionRef, (snapshot) => {\n        const bookList = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n        setBooks(bookList);\n      }, (error) => {\n        console.error(\"Error fetching books:\", error);\n        displayModal(\"Data Error\", \"Failed to load book data.\");\n      });\n\n      // Fetch Reward Items\n      const rewardItemsCollectionRef = collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/rewardItems`);\n      const unsubscribeRewardItems = onSnapshot(rewardItemsCollectionRef, (snapshot) => {\n        const itemList = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n        setRewardItems(itemList);\n      }, (error) => {\n        console.error(\"Error fetching reward items:\", error);\n        displayModal(\"Data Error\", \"Failed to load reward item data.\");\n      });\n\n      // Fetch Saved Assignments\n      const savedAssignmentsCollectionRef = collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/savedAssignments`);\n      const unsubscribeSavedAssignments = onSnapshot(savedAssignmentsCollectionRef, (snapshot) => {\n        const assignmentList = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n        setSavedAssignments(assignmentList);\n      }, (error) => {\n        console.error(\"Error fetching saved assignments:\", error);\n        displayModal(\"Data Error\", \"Failed to load saved assignments data.\");\n      });\n\n\n      return () => {\n        unsubscribeStudents();\n        unsubscribeBooks();\n        unsubscribeRewardItems();\n        unsubscribeSavedAssignments();\n      }; // Cleanup listeners on unmount\n    }\n  }, [currentDb, userId, isAuthReady]);\n\n  // --- Student Management Functions ---\n  const addStudent = async () => {\n    if (currentDb && userId && newStudentName.trim() !== '') {\n      try {\n        // Generate a shorter, unique alphanumeric barcode (e.g., first 12 chars of UUID)\n        const studentBarcode = crypto.randomUUID().substring(0, 12).toUpperCase();\n\n        // Generate a unique 4-digit PIN\n        let studentPin = '';\n        let isPinUnique = false;\n        let attempts = 0;\n        const existingPins = students.map(s => s.pin);\n\n        while (!isPinUnique && attempts < 100) { // Limit attempts to prevent infinite loop\n          const randomPin = Math.floor(1000 + Math.random() * 9000).toString(); // 4-digit number\n          if (!existingPins.includes(randomPin)) {\n            studentPin = randomPin;\n            isPinUnique = true;\n          }\n          attempts++;\n        }\n\n        if (!isPinUnique) {\n          displayModal(\"Error\", \"Could not generate a unique 4-digit PIN. Please try again or contact support.\");\n          return;\n        }\n\n        await addDoc(collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`), {\n          name: newStudentName.trim(),\n          barcode: studentBarcode,\n          pin: studentPin, // New 4-digit PIN\n          points: 0, // Initialize points to 0\n        });\n        setNewStudentName('');\n        displayModal(\"Success\", `Student \"${newStudentName.trim()}\" added!\\nBarcode: ${studentBarcode}\\nPIN: ${studentPin}`);\n      } catch (error) {\n        console.error(\"Error adding student:\", error);\n        displayModal(\"Error\", \"Failed to add student.\");\n      }\n    } else {\n      displayModal(\"Input Required\", \"Please enter a student name.\");\n    }\n  };\n\n  const removeStudent = async (studentId) => {\n    if (currentDb && userId) {\n      try {\n        await deleteDoc(doc(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`, studentId));\n        displayModal(\"Success\", \"Student removed successfully.\");\n      } catch (error) {\n        console.error(\"Error removing student:\", error);\n        displayModal(\"Error\", \"Failed to remove student.\");\n      }\n    }\n  };\n\n  // Enhanced student lookup by name, barcode, or PIN\n  const searchStudent = async (searchTerm) => {\n    if (currentDb && userId && searchTerm.trim() !== '') {\n      const lowerCaseSearchTerm = searchTerm.trim().toLowerCase();\n      try {\n        // Search by barcode\n        let q = query(collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`), where(\"barcode\", \"==\", searchTerm.trim().toUpperCase()));\n        let querySnapshot = await getDocs(q);\n        if (!querySnapshot.empty) {\n          return { id: querySnapshot.docs[0].id, ...querySnapshot.docs[0].data() };\n        }\n\n        // Search by PIN\n        q = query(collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`), where(\"pin\", \"==\", searchTerm.trim()));\n        querySnapshot = await getDocs(q);\n        if (!querySnapshot.empty) {\n          return { id: querySnapshot.docs[0].id, ...querySnapshot.docs[0].data() };\n        }\n\n        // Search by name (case-insensitive, partial match)\n        // Note: Firestore does not support case-insensitive partial string search directly.\n        // We'll fetch all students and filter client-side for simplicity.\n        // For large datasets, a dedicated search index (e.g., Algolia, ElasticSearch) would be needed.\n        const allStudentsSnapshot = await getDocs(collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`));\n        const matchedStudent = allStudentsSnapshot.docs.find(doc =>\n          doc.data().name.toLowerCase().includes(lowerCaseSearchTerm)\n        );\n        if (matchedStudent) {\n          return { id: matchedStudent.id, ...matchedStudent.data() };\n        }\n\n      } catch (error) {\n        console.error(\"Error searching student:\", error);\n      }\n    }\n    return null;\n  };\n\n\n  // --- Random Child Selector Logic ---\n  const startPickingStudent = () => {\n    if (students.length === 0) {\n      setCurrentPickedStudent(\"No students available!\");\n      displayModal(\"No Students\", \"Please add students to the list first in Admin Settings.\");\n      return;\n    }\n    if (selectedStudents.length === 0) {\n      setSelectedStudents([...students]); // Reset if all students have been picked\n    }\n\n    setPickingStudent(true);\n    setCountdown(3);\n    setCurrentPickedStudent(null);\n\n    countdownIntervalRef.current = setInterval(() => {\n      setCountdown((prev) => {\n        if (prev === 1) {\n          clearInterval(countdownIntervalRef.current);\n          pickRandomStudent();\n          setPickingStudent(false);\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n  };\n\n  const pickRandomStudent = () => {\n    if (selectedStudents.length === 0) {\n      setCurrentPickedStudent(\"All students picked! Resetting...\");\n      setTimeout(() => setSelectedStudents([...students]), 1000); // Reset after a short delay\n      return;\n    }\n    const randomIndex = Math.floor(Math.random() * selectedStudents.length);\n    const picked = selectedStudents[randomIndex];\n    setCurrentPickedStudent(picked.name);\n\n    // Remove picked student from the selected list for this round\n    const updatedSelected = selectedStudents.filter(s => s.id !== picked.id);\n    setSelectedStudents(updatedSelected);\n  };\n\n  const resetPickedStudents = () => {\n    setSelectedStudents([...students]);\n    setCurrentPickedStudent(null);\n    setPickingStudent(false);\n    setCountdown(3);\n    clearInterval(countdownIntervalRef.current);\n  };\n\n  // --- Library System Functions ---\n  const handleISBNLookup = async () => {\n    if (!isbnSearchInput.trim()) {\n      displayModal(\"Input Required\", \"Please enter an ISBN to search.\");\n      return;\n    }\n    setIsbnSearchLoading(true);\n    try {\n      const response = await fetch(`https://www.googleapis.com/books/v1/volumes?q=isbn:${isbnSearchInput.trim()}`);\n      const data = await response.json();\n\n      if (data.items && data.items.length > 0) {\n        const bookInfo = data.items[0].volumeInfo;\n        setNewBookTitle(bookInfo.title || 'N/A');\n        setNewBookAuthor(bookInfo.authors ? bookInfo.authors.join(', ') : 'N/A');\n        displayModal(\"Book Found\", `Found: \"${bookInfo.title}\" by ${bookInfo.authors ? bookInfo.authors.join(', ') : 'N/A'}`);\n      } else {\n        displayModal(\"Book Not Found\", \"No book found for this ISBN. Please check the number or enter details manually.\");\n        setNewBookISBN(''); // Clear ISBN if not found\n        setNewBookTitle('');\n        setNewBookAuthor('');\n      }\n    } catch (error) {\n      console.error(\"Error fetching ISBN data:\", error);\n      displayModal(\"Search Error\", \"Failed to search ISBN. Please check your connection or try again.\");\n    } finally {\n      setIsbnSearchLoading(false);\n    }\n  };\n\n  const addBook = async () => {\n    if (currentDb && userId && newBookISBN.trim() && newBookTitle.trim() && newBookAuthor.trim()) {\n      try {\n        await addDoc(collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/books`), {\n          isbn: newBookISBN.trim(),\n          title: newBookTitle.trim(),\n          author: newBookAuthor.trim(),\n          isAvailable: true,\n          currentBorrowerId: null,\n          currentBorrowerName: null,\n          checkoutDate: null, // New field for tracking checkout date\n        });\n        setNewBookISBN('');\n        setNewBookTitle('');\n        setNewBookAuthor('');\n        setIsbnSearchInput(''); // Clear ISBN search input too\n        displayModal(\"Success\", \"Book added to library.\");\n      } catch (error) {\n        console.error(\"Error adding book:\", error);\n        displayModal(\"Error\", \"Failed to add book.\");\n      }\n    } else {\n      displayModal(\"Input Required\", \"Please fill in all book details (ISBN, Title, Author).\");\n    }\n  };\n\n  const checkoutBook = async () => {\n    if (!selectedBookForCheckout) {\n      displayModal(\"Selection Required\", \"Please select a book to checkout.\");\n      return;\n    }\n    const student = await searchStudent(libraryStudentBarcodeInput); // Use enhanced search\n    if (!student) {\n      displayModal(\"Student Not Found\", \"No student found with that barcode/PIN/name. Please check the input.\");\n      return;\n    }\n    if (!selectedBookForCheckout.isAvailable) {\n      displayModal(\"Book Unavailable\", \"This book is currently not available for checkout.\");\n      return;\n    }\n\n    if (currentDb && userId) {\n      try {\n        await updateDoc(doc(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/books`, selectedBookForCheckout.id), {\n          isAvailable: false,\n          currentBorrowerId: student.id,\n          currentBorrowerName: student.name,\n          checkoutDate: new Date().toISOString(), // Store checkout date\n        });\n        setSelectedBookForCheckout(null);\n        setLibraryStudentBarcodeInput('');\n        displayModal(\"Success\", `\"${selectedBookForCheckout.title}\" checked out by ${student.name}.`);\n      } catch (error) {\n        console.error(\"Error checking out book:\", error);\n        displayModal(\"Error\", \"Failed to checkout book.\");\n      }\n    }\n  };\n\n  const checkinBook = async () => {\n    if (!selectedBookForCheckin) {\n      displayModal(\"Selection Required\", \"Please select a book to check-in.\");\n      return;\n    }\n    if (selectedBookForCheckin.isAvailable) {\n      displayModal(\"Book Status\", \"This book is already marked as available.\");\n      return;\n    }\n\n    if (currentDb && userId) {\n      try {\n        await updateDoc(doc(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/books`, selectedBookForCheckin.id), {\n          isAvailable: true,\n          currentBorrowerId: null,\n          currentBorrowerName: null,\n          checkoutDate: null, // Clear checkout date on check-in\n        });\n        setSelectedBookForCheckin(null);\n        displayModal(\"Success\", `\"${selectedBookForCheckin.title}\" checked in.`);\n      } catch (error) {\n        console.error(\"Error checking in book:\", error);\n        displayModal(\"Error\", \"Failed to check-in book.\");\n      }\n    }\n  };\n\n  // --- Reward System Functions ---\n  const addRewardItem = async () => {\n    if (currentDb && userId && newRewardItemName.trim() && newRewardItemCost.trim() && newRewardItemQuantity.trim()) {\n      const cost = parseInt(newRewardItemCost.trim());\n      const quantity = parseInt(newRewardItemQuantity.trim());\n      if (isNaN(cost) || cost <= 0 || isNaN(quantity) || quantity < 0) {\n        displayModal(\"Invalid Input\", \"Cost must be a positive number and Quantity must be a non-negative number.\");\n        return;\n      }\n      try {\n        await addDoc(collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/rewardItems`), {\n          name: newRewardItemName.trim(),\n          cost: cost,\n          quantity: quantity,\n        });\n        setNewRewardItemName('');\n        setNewRewardItemCost('');\n        setNewRewardItemQuantity('');\n        displayModal(\"Success\", `Reward item \"${newRewardItemName.trim()}\" added.`);\n      } catch (error) {\n        console.error(\"Error adding reward item:\", error);\n        displayModal(\"Error\", \"Failed to add reward item.\");\n      }\n    } else {\n      displayModal(\"Input Required\", \"Please fill in all reward item details.\");\n    }\n  };\n\n  const handleRewardStudentLookup = async () => {\n    const student = await searchStudent(rewardStudentSearchInput); // Use enhanced search\n    if (student) {\n      setCurrentRewardStudent(student);\n      displayModal(\"Student Found\", `Student: ${student.name} (Points: ${student.points})`);\n    } else {\n      setCurrentRewardStudent(null);\n      displayModal(\"Student Not Found\", \"No student found with that barcode/PIN/name.\");\n    }\n  };\n\n  const addPoints = async () => {\n    if (!currentRewardStudent) {\n      displayModal(\"No Student Selected\", \"Please lookup a student first.\");\n      return;\n    }\n    const points = parseInt(pointsToAdd.trim());\n    if (isNaN(points) || points <= 0) {\n      displayModal(\"Invalid Input\", \"Points to add must be a positive number.\");\n      return;\n    }\n    if (currentDb && userId) {\n      try {\n        await updateDoc(doc(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`, currentRewardStudent.id), {\n          points: currentRewardStudent.points + points,\n        });\n        setPointsToAdd('');\n        displayModal(\"Success\", `${points} points added to ${currentRewardStudent.name}.`);\n        // Refresh currentRewardStudent to show updated points\n        const updatedStudent = await searchStudent(rewardStudentSearchInput);\n        setCurrentRewardStudent(updatedStudent);\n      } catch (error) {\n        console.error(\"Error adding points:\", error);\n        displayModal(\"Error\", \"Failed to add points.\");\n      }\n    }\n  };\n\n  const checkoutRewardItem = async () => {\n    if (!currentRewardStudent) {\n      displayModal(\"No Student Selected\", \"Please lookup a student first.\");\n      return;\n    }\n    if (!selectedRewardItem) {\n      displayModal(\"No Item Selected\", \"Please select a reward item to checkout.\");\n      return;\n    }\n    if (currentRewardStudent.points < selectedRewardItem.cost) {\n      displayModal(\"Insufficient Points\", `${currentRewardStudent.name} does not have enough points for \"${selectedRewardItem.name}\".`);\n      return;\n    }\n    if (selectedRewardItem.quantity <= 0) {\n      displayModal(\"Out of Stock\", `\"${selectedRewardItem.name}\" is out of stock.`);\n      return;\n    }\n\n    if (currentDb && userId) {\n      try {\n        // Deduct points from student\n        await updateDoc(doc(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/students`, currentRewardStudent.id), {\n          points: currentRewardStudent.points - selectedRewardItem.cost,\n        });\n        // Decrease item quantity\n        await updateDoc(doc(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/rewardItems`, selectedRewardItem.id), {\n          quantity: selectedRewardItem.quantity - 1,\n        });\n        setSelectedRewardItem(null);\n        displayModal(\"Success\", `\"${selectedRewardItem.name}\" checked out by ${currentRewardStudent.name}. Points deducted.`);\n        // Refresh currentRewardStudent to show updated points\n        const updatedStudent = await searchStudent(rewardStudentSearchInput);\n        setCurrentRewardStudent(updatedStudent);\n      } catch (error) {\n        console.error(\"Error checking out reward item:\", error);\n        displayModal(\"Error\", \"Failed to checkout reward item.\");\n      }\n    }\n  };\n\n  // --- Extra Credit / Busy Work Functions ---\n  const generateAssignment = async () => {\n    setGeneratingAssignment(true);\n    setAssignmentGenerationError('');\n    setGeneratedAssignmentContent('');\n    setGeneratedAssignmentAnswerKey('');\n    setShowAssignmentAnswerKey(false);\n\n    const prompt = `Generate a short, printable extra credit or busy work assignment for a ${assignmentAge}th grade student on the topic of \"${assignmentTopic}\". The assignment should be engaging and suitable for independent work. Provide the output in two distinct sections, clearly labeled \"Assignment:\" and \"Answer Key:\". If an answer key is not applicable or cannot be generated, state \"No Answer Key Provided.\"`;\n\n    try {\n      let chatHistory = [];\n      chatHistory.push({ role: \"user\", parts: [{ text: prompt }] });\n      const payload = { contents: chatHistory };\n      const apiKey = \"\"; // Canvas will provide this at runtime\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n\n      const result = await response.json();\n\n      if (result.candidates && result.candidates.length > 0 &&\n          result.candidates[0].content && result.candidates[0].content.parts &&\n          result.candidates[0].content.parts.length > 0) {\n        const text = result.candidates[0].content.parts[0].text;\n\n        // Improved parsing logic for Assignment and Answer Key\n        const assignmentMarker = \"Assignment:\";\n        const answerKeyMarker = \"Answer Key:\";\n\n        const assignmentIndex = text.indexOf(assignmentMarker);\n        const answerKeyIndex = text.indexOf(answerKeyMarker);\n\n        let assignmentContent = \"\";\n        let answerKeyContent = \"\";\n\n        if (assignmentIndex !== -1) {\n          if (answerKeyIndex !== -1 && answerKeyIndex > assignmentIndex) {\n            assignmentContent = text.substring(assignmentIndex + assignmentMarker.length, answerKeyIndex).trim();\n            answerKeyContent = text.substring(answerKeyIndex + answerKeyMarker.length).trim();\n          } else {\n            assignmentContent = text.substring(assignmentIndex + assignmentMarker.length).trim();\n            answerKeyContent = \"No Answer Key Provided.\"; // Default if marker not found\n          }\n        } else if (answerKeyIndex !== -1) {\n          // If only answer key is found, assume content before it is assignment\n          assignmentContent = text.substring(0, answerKeyIndex).trim();\n          answerKeyContent = text.substring(answerKeyIndex + answerKeyMarker.length).trim();\n        } else {\n          // If neither marker is found, treat the whole text as assignment\n          assignmentContent = text.trim();\n          answerKeyContent = \"No Answer Key Provided.\"; // Default if no markers\n        }\n\n        setGeneratedAssignmentContent(assignmentContent);\n        setGeneratedAssignmentAnswerKey(answerKeyContent);\n\n      } else {\n        setAssignmentGenerationError(\"Failed to generate assignment. Please try again.\");\n      }\n    } catch (err) {\n      console.error(\"Error generating assignment:\", err);\n      setAssignmentGenerationError(\"An error occurred while generating the assignment. Please check your network connection.\");\n    } finally {\n      setGeneratingAssignment(false);\n    }\n  };\n\n  const saveAssignment = async () => {\n    if (currentDb && userId && generatedAssignmentContent.trim() !== '') {\n      try {\n        await addDoc(collection(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/savedAssignments`), {\n          age: assignmentAge,\n          topic: assignmentTopic,\n          content: generatedAssignmentContent,\n          answerKey: generatedAssignmentAnswerKey,\n          createdAt: new Date().toISOString(),\n        });\n        displayModal(\"Success\", \"Assignment saved successfully!\");\n      } catch (error) {\n        console.error(\"Error saving assignment:\", error);\n        displayModal(\"Error\", \"Failed to save assignment.\");\n      }\n    } else {\n      displayModal(\"No Content\", \"Generate an assignment first before saving.\");\n    }\n  };\n\n  const printAssignment = (content, answerKey, topic, age) => {\n    const printWindow = window.open('', '', 'height=600,width=800');\n    printWindow.document.write('<html><head><title>Print Assignment</title>');\n    printWindow.document.write('<style>body { font-family: Arial, sans-serif; margin: 20px; }</style>');\n    printWindow.document.write('</head><body>');\n    printWindow.document.write(`<h1>Extra Credit / Busy Work Assignment</h1>`);\n    printWindow.document.write(`<h2>Topic: ${topic} (Grade ${age})</h2>`);\n    printWindow.document.write(`<h3>Assignment:</h3>`);\n    printWindow.document.write(`<pre style=\"white-space: pre-wrap; word-wrap: break-word;\">${content}</pre>`);\n    if (answerKey && answerKey !== \"No Answer Key Provided.\" && answerKey !== \"Could not parse distinct assignment or answer key sections.\") {\n      printWindow.document.write(`<h3>Answer Key:</h3>`);\n      printWindow.document.write(`<pre style=\"white-space: pre-wrap; word-wrap: break-word;\">${answerKey}</pre>`);\n    } else {\n      printWindow.document.write(`<p>No answer key available for printing.</p>`);\n    }\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  const deleteSavedAssignment = async (assignmentId) => {\n    if (currentDb && userId) {\n      try {\n        await deleteDoc(doc(currentDb, `artifacts/${APP_ID_FOR_FIRESTORE}/users/${userId}/savedAssignments`, assignmentId));\n        displayModal(\"Success\", \"Saved assignment deleted.\");\n      } catch (error) {\n        console.error(\"Error deleting saved assignment:\", error);\n        displayModal(\"Error\", \"Failed to delete saved assignment.\");\n      }\n    }\n  };\n\n  // --- Question Generator Functions ---\n  const generateQuestion = async () => {\n    setQuestionLoading(true);\n    setQuestionError('');\n    setGeneratedQuestion('');\n    setGeneratedAnswer('');\n    setShowQuestionAnswer(false); // Hide answer by default\n\n    const prompt = `Generate a challenging question and its answer for a ${questionGrade}th grade student on the topic of \"${questionTopic}\". Format the output as:\n    Question: [Your question here]\n    Answer: [Your answer here]`;\n\n    try {\n      let chatHistory = [];\n      chatHistory.push({ role: \"user\", parts: [{ text: prompt }] });\n      const payload = { contents: chatHistory };\n      const apiKey = \"\"; // Canvas will provide this at runtime\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n\n      const result = await response.json();\n\n      if (result.candidates && result.candidates.length > 0 &&\n          result.candidates[0].content && result.candidates[0].content.parts &&\n          result.candidates[0].content.parts.length > 0) {\n        const text = result.candidates[0].content.parts[0].text;\n\n        const questionMarker = \"Question:\";\n        const answerMarker = \"Answer:\";\n\n        const questionIndex = text.indexOf(questionMarker);\n        const answerIndex = text.indexOf(answerMarker);\n\n        let questionContent = \"\";\n        let answerContent = \"\";\n\n        if (questionIndex !== -1) {\n          if (answerIndex !== -1 && answerIndex > questionIndex) {\n            questionContent = text.substring(questionIndex + questionMarker.length, answerIndex).trim();\n            answerContent = text.substring(answerIndex + answerMarker.length).trim();\n          } else {\n            questionContent = text.substring(questionIndex + questionMarker.length).trim();\n            answerContent = \"Could not parse answer. Please click 'Show Answer' to see full response.\";\n          }\n        } else if (answerIndex !== -1) {\n          questionContent = text.substring(0, answerIndex).trim();\n          answerContent = text.substring(answerIndex + answerMarker.length).trim();\n        } else {\n          questionContent = text.trim();\n          answerContent = \"Could not parse answer. Please click 'Show Answer' to see full response.\";\n        }\n\n        setGeneratedQuestion(questionContent);\n        setGeneratedAnswer(answerContent);\n\n      } else {\n        setQuestionError(\"Failed to generate question. Please try again.\");\n      }\n    } catch (err) {\n      console.error(\"Error generating question:\", err);\n      setQuestionError(\"An error occurred while generating the question. Please check your network connection.\");\n    } finally {\n      setQuestionLoading(false);\n    }\n  };\n\n  // --- Input Field Usability Enhancements ---\n  // Generic handler for \"Enter\" key press to trigger a function\n  const handleEnterKey = (event, actionFunction) => {\n    if (event.key === 'Enter') {\n      actionFunction();\n    }\n  };\n\n  // UI Components for each feature\n  const Dashboard = ({ setCurrentPage, userId }) => (\n    <div className=\"p-6 bg-white rounded-lg shadow-lg\">\n      <h2 className=\"text-3xl font-bold text-gray-800 mb-6\">Welcome, Teacher!</h2>\n      <p className=\"text-gray-600 mb-8\">Manage your classroom with ease using the tools below.</p>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        <button\n          onClick={() => setCurrentPage('admin-settings')}\n          className=\"bg-gray-700 hover:bg-gray-800 text-white font-semibold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105\"\n        >\n          <i className=\"fas fa-cog mr-3\"></i> Admin Settings\n        </button>\n        <button\n          onClick={() => setCurrentPage('library')}\n          className=\"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105\"\n        >\n          <i className=\"fas fa-book mr-3\"></i> In-Class Library\n        </button>\n        <button\n          onClick={() => setCurrentPage('selector')}\n          className=\"bg-green-600 hover:bg-green-700 text-white font-semibold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105\"\n        >\n          <i className=\"fas fa-users mr-3\"></i> Random Child Selector\n        </button>\n        <button\n          onClick={() => setCurrentPage('rewards')}\n          className=\"bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105\"\n        >\n          <i className=\"fas fa-star mr-3\"></i> Reward System\n        </button>\n        <button\n          onClick={() => setCurrentPage('assignments')}\n          className=\"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105\"\n        >\n          <i className=\"fas fa-clipboard-list mr-3\"></i> Extra Credit/Busy Work\n        </button>\n        <button\n          onClick={() => setCurrentPage('saved-assignments')}\n          className=\"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105\"\n        >\n          <i className=\"fas fa-save mr-3\"></i> Saved Assignments\n        </button>\n        <button\n          onClick={() => setCurrentPage('questions')}\n          className=\"bg-red-600 hover:bg-red-700 text-white font-semibold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105\"\n        >\n          <i className=\"fas fa-question-circle mr-3\"></i> Question Generator\n        </button>\n      </div>\n      {userId && (\n        <div className=\"mt-8 p-4 bg-gray-100 rounded-lg text-gray-700 text-sm\">\n          Your User ID: <span className=\"font-mono break-all\">{userId}</span>\n        </div>\n      )}\n    </div>\n  );\n\n  const AdminSettings = ({ setCurrentPage, students, newStudentName, setNewStudentName, addStudent, removeStudent, newStudentNameRef }) => (\n    <div className=\"p-6 bg-white rounded-lg shadow-lg\">\n      <h2 className=\"text-3xl font-bold text-gray-800 mb-6\">Admin Settings</h2>\n      <p className=\"text-gray-600 mb-4\">\n        Manage your students here. This list will be used across all other features.\n      </p>\n\n      <div className=\"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\">\n        <h3 className=\"text-xl font-semibold text-gray-700 mb-3\">Manage Students</h3>\n        <div className=\"flex items-center mb-4\">\n          <input\n            type=\"text\"\n            value={newStudentName}\n            onChange={(e) => { setNewStudentName(e.target.value); }}\n            onKeyDown={(e) => handleEnterKey(e, addStudent)}\n            placeholder=\"Enter student name\"\n            className=\"flex-grow p-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            ref={newStudentNameRef} // Ref for focus management\n            autoFocus // AutoFocus for the first input on this page\n          />\n          <button\n            onClick={addStudent}\n            className=\"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-5 rounded-r-lg shadow-md transition duration-300 ease-in-out\"\n          >\n            Add Student\n          </button>\n        </div>\n        {students.length > 0 ? (\n          <ul className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3\">\n            {students.map((student) => (\n              <li key={student.id} className=\"flex flex-col items-start justify-between bg-white p-3 rounded-lg shadow-sm border border-gray-100\">\n                <div className=\"flex justify-between w-full items-center\">\n                  <span className=\"text-gray-800 font-medium\">{student.name}</span>\n                  <button\n                    onClick={() => removeStudent(student.id)}\n                    className=\"text-red-500 hover:text-red-700 text-lg transition duration-200\"\n                    title=\"Remove student\"\n                  >\n                    <i className=\"fas fa-times-circle\"></i>\n                  </button>\n                </div>\n                <span className=\"text-gray-600 text-xs mt-1 break-all\">Barcode: {student.barcode}</span>\n                <span className=\"text-gray-700 text-sm mt-1\">PIN: {student.pin}</span> {/* Display PIN */}\n                <span className=\"text-gray-700 text-sm mt-1\">Points: {student.points}</span>\n              </li>\n            ))}\n          </ul>\n        ) : (\n          <p className=\"text-gray-500 italic\">No students added yet. Add some to get started!</p>\n        )}\n      </div>\n\n      <button\n        onClick={() => setCurrentPage('print-ids')}\n        className=\"mt-8 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n      >\n        <i className=\"fas fa-print mr-2\"></i> Print Student IDs\n      </button>\n\n      <button\n        onClick={() => setCurrentPage('dashboard')}\n        className=\"mt-8 ml-4 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n      >\n        Back to Dashboard\n      </button>\n    </div>\n  );\n\n  const PrintStudentIDs = ({ setCurrentPage, students }) => {\n    const printStudentList = () => {\n      const printWindow = window.open('', '', 'height=600,width=800');\n      printWindow.document.write('<html><head><title>Print Student IDs</title>');\n      printWindow.document.write('<style>');\n      printWindow.document.write(`\n        body { font-family: Arial, sans-serif; margin: 20px; }\n        .id-card {\n          border: 1px solid #ccc;\n          border-radius: 8px;\n          padding: 15px;\n          margin: 10px;\n          display: inline-block;\n          width: 280px; /* Adjust as needed for card size */\n          box-shadow: 2px 2px 5px rgba(0,0,0,0.1);\n          vertical-align: top;\n        }\n        .id-card h3 { margin-top: 0; margin-bottom: 5px; color: #333; }\n        .id-card p { margin: 3px 0; font-size: 0.9em; color: #555; word-break: break-all; }\n        .id-card .barcode-label { font-weight: bold; margin-top: 8px; }\n      `);\n      printWindow.document.write('</style>');\n      printWindow.document.write('</head><body>');\n      printWindow.document.write('<h1>Student ID Cards</h1>');\n      printWindow.document.write('<p>Cut along the lines to create individual student ID cards.</p><hr/>');\n\n      students.forEach(student => {\n        printWindow.document.write(`\n          <div class=\"id-card\">\n            <h3>${student.name}</h3>\n            <p class=\"barcode-label\">Barcode:</p>\n            <p>${student.barcode}</p>\n            <p class=\"barcode-label\">PIN:</p>\n            <p>${student.pin}</p>\n          </div>\n        `);\n      });\n\n      printWindow.document.write('</body></html>');\n      printWindow.document.close();\n      printWindow.print();\n    };\n\n    return (\n      <div className=\"p-6 bg-white rounded-lg shadow-lg\">\n        <h2 className=\"text-3xl font-bold text-gray-800 mb-6\">Print Student IDs</h2>\n        <p className=\"text-gray-600 mb-4\">\n          Generate a printable list of student names, barcodes, and PINs for creating ID cards.\n        </p>\n\n        {students.length > 0 ? (\n          <div className=\"mb-6\">\n            <h3 className=\"text-xl font-semibold text-gray-700 mb-3\">Student List for Printing:</h3>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\n              {students.map(student => (\n                <div key={student.id} className=\"bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-100\">\n                  <p className=\"font-medium text-gray-800\">{student.name}</p>\n                  <p className=\"text-sm text-gray-600 break-all\">Barcode: {student.barcode}</p>\n                  <p className=\"text-sm text-gray-600\">PIN: {student.pin}</p>\n                </div>\n              ))}\n            </div>\n            <button\n              onClick={printStudentList}\n              className=\"mt-6 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-5 rounded-lg shadow-md transition duration-300 ease-in-out\"\n            >\n              <i className=\"fas fa-print mr-2\"></i> Print All IDs\n            </button>\n          </div>\n        ) : (\n          <p className=\"text-gray-500 italic\">No students added yet. Add students in Admin Settings to generate IDs.</p>\n        )}\n\n        <button\n          onClick={() => setCurrentPage('admin-settings')}\n          className=\"mt-8 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n        >\n          Back to Admin Settings\n        </button>\n      </div>\n    );\n  };\n\n\n  const LibrarySystem = ({ setCurrentPage, students, books, newBookISBN, setNewBookISBN, newBookTitle, setNewBookTitle, newBookAuthor, setNewBookAuthor, libraryStudentBarcodeInput, setLibraryStudentBarcodeInput, selectedBookForCheckout, setSelectedBookForCheckout, selectedBookForCheckin, setSelectedBookForCheckin, isbnSearchInput, setIsbnSearchInput, isbnSearchLoading, setIsbnSearchLoading, handleISBNLookup, addBook, checkoutBook, checkinBook, isbnSearchInputRef, newBookISBNRef, newBookTitleRef, newBookAuthorRef, libraryStudentBarcodeInputRef, handleEnterKey }) => {\n    const isBookLate = (book) => {\n      if (book.isAvailable || !book.checkoutDate) return false;\n      const checkoutDate = new Date(book.checkoutDate);\n      const sevenDaysAgo = new Date();\n      sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7); // Changed to 7 days\n      return checkoutDate < sevenDaysAgo;\n    };\n\n    return (\n      <div className=\"p-6 bg-white rounded-lg shadow-lg\">\n        <h2 className=\"text-3xl font-bold text-gray-800 mb-6\">In-Class Library System</h2>\n        <p className=\"text-gray-600 mb-4\">\n          Manage your classroom library. Add books (manually or by ISBN search), check them out to students using their barcodes/PINs/names, and check them back in.\n        </p>\n\n        {/* Add New Book */}\n        <div className=\"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\">\n          <h3 className=\"text-xl font-semibold text-gray-700 mb-3\">Add New Book</h3>\n          <div className=\"flex items-center mb-2\">\n            <input\n              type=\"text\"\n              value={isbnSearchInput}\n              onChange={(e) => { setIsbnSearchInput(e.target.value); }}\n              onKeyDown={(e) => handleEnterKey(e, handleISBNLookup)}\n              placeholder=\"Search by ISBN (e.g., 9780321765723)\"\n              className=\"flex-grow p-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              ref={isbnSearchInputRef} // Ref for focus management\n              autoFocus // AutoFocus for the first input on this page\n            />\n            <button\n              onClick={handleISBNLookup}\n              disabled={isbnSearchLoading}\n              className={`bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-r-lg shadow-md transition duration-300 ease-in-out ${isbnSearchLoading ? 'opacity-50 cursor-not-allowed' : ''}`}\n            >\n              {isbnSearchLoading ? 'Searching...' : 'Search Book'}\n            </button>\n          </div>\n          <p className=\"text-gray-500 text-sm mb-2\">Or enter details manually:</p>\n          <input\n            type=\"text\"\n            value={newBookISBN}\n            onChange={(e) => { setNewBookISBN(e.target.value); }}\n            onKeyDown={(e) => { if (e.key === 'Enter') newBookTitleRef.current.focus(); }}\n            placeholder=\"ISBN (manual entry)\"\n            className=\"w-full p-2 mb-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            ref={newBookISBNRef} // Ref for focus management\n          />\n          <input\n            type=\"text\"\n            id=\"newBookTitleInput\"\n            value={newBookTitle}\n            onChange={(e) => { setNewBookTitle(e.target.value); }}\n            onKeyDown={(e) => { if (e.key === 'Enter') newBookAuthorRef.current.focus(); }}\n            placeholder=\"Book Title\"\n            className=\"w-full p-2 mb-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            ref={newBookTitleRef} // Ref for focus management\n          />\n          <input\n            type=\"text\"\n            id=\"newBookAuthorInput\"\n            value={newBookAuthor}\n            onChange={(e) => { setNewBookAuthor(e.target.value); }}\n            onKeyDown={(e) => handleEnterKey(e, addBook)}\n            placeholder=\"Author\"\n            className=\"w-full p-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            ref={newBookAuthorRef} // Ref for focus management\n          />\n          <button\n            onClick={addBook}\n            className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n          >\n            Add Book\n          </button>\n        </div>\n\n        {/* Checkout Book */}\n        <div className=\"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\">\n          <h3 className=\"text-xl font-semibold text-gray-700 mb-3\">Checkout Book</h3>\n          <select\n            value={selectedBookForCheckout ? selectedBookForCheckout.id : ''}\n            onChange={(e) => setSelectedBookForCheckout(books.find(book => book.id === e.target.value))}\n            className=\"w-full p-2 mb-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          >\n            <option value=\"\">Select a book to checkout</option>\n            {books.filter(book => book.isAvailable).map(book => (\n              <option key={book.id} value={book.id}>{book.title} by {book.author}</option>\n            ))}\n          </select>\n          <input\n            type=\"text\"\n            value={libraryStudentBarcodeInput}\n            onChange={(e) => { setLibraryStudentBarcodeInput(e.target.value); }}\n            onKeyDown={(e) => handleEnterKey(e, checkoutBook)}\n            placeholder=\"Scan/Enter Student Barcode, PIN, or Name\"\n            className=\"w-full p-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            ref={libraryStudentBarcodeInputRef} // Ref for focus management\n          />\n          <button\n            onClick={checkoutBook}\n            disabled={!selectedBookForCheckout || !libraryStudentBarcodeInput}\n            className={`w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out ${(!selectedBookForCheckout || !libraryStudentBarcodeInput) ? 'opacity-50 cursor-not-allowed' : ''}`}\n          >\n            Checkout Book\n          </button>\n        </div>\n\n        {/* Check-in Book */}\n        <div className=\"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\">\n          <h3 className=\"text-xl font-semibold text-gray-700 mb-3\">Check-in Book</h3>\n          <select\n            value={selectedBookForCheckin ? selectedBookForCheckin.id : ''}\n            onChange={(e) => setSelectedBookForCheckin(books.find(book => book.id === e.target.value))}\n            onKeyDown={(e) => handleEnterKey(e, checkinBook)}\n            className=\"w-full p-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          >\n            <option value=\"\">Select a book to check-in</option>\n            {books.filter(book => !book.isAvailable).map(book => (\n              <option key={book.id} value={book.id}>{book.title} (by {book.author}) - Borrowed by {book.currentBorrowerName}</option>\n            ))}\n          </select>\n          <button\n            onClick={checkinBook}\n            disabled={!selectedBookForCheckin}\n            className={`w-full bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out ${!selectedBookForCheckin ? 'opacity-50 cursor-not-allowed' : ''}`}\n          >\n            Check-in Book\n          </button>\n        </div>\n\n        {/* Current Library Inventory */}\n        <div className=\"mt-6\">\n          <h3 className=\"text-2xl font-semibold text-gray-700 mb-4\">Current Library Inventory</h3>\n          {books.length > 0 ? (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full bg-white border border-gray-200 rounded-lg shadow-sm\">\n                <thead>\n                  <tr className=\"bg-gray-100 border-b\">\n                    <th className=\"py-2 px-4 text-left text-sm font-medium text-gray-600\">Title</th>\n                    <th className=\"py-2 px-4 text-left text-sm font-medium text-gray-600\">Author</th>\n                    <th className=\"py-2 px-4 text-left text-sm font-medium text-gray-600\">ISBN</th>\n                    <th className=\"py-2 px-4 text-left text-sm font-medium text-gray-600\">Status</th>\n                    <th className=\"py-2 px-4 text-left text-sm font-medium text-gray-600\">Borrowed By</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {books.map((book) => (\n                    <tr key={book.id} className={`border-b last:border-b-0 hover:bg-gray-50 ${isBookLate(book) ? 'bg-red-100' : ''}`}>\n                      <td className=\"py-2 px-4 text-sm text-gray-800\">{book.title}</td>\n                      <td className=\"py-2 px-4 text-sm text-gray-800\">{book.author}</td>\n                      <td className=\"py-2 px-4 text-sm text-gray-800\">{book.isbn}</td>\n                      <td className=\"py-2 px-4 text-sm text-gray-800\">\n                        <span className={`px-2 py-1 rounded-full text-xs font-semibold ${book.isAvailable ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\n                          {book.isAvailable ? 'Available' : (isBookLate(book) ? 'Late' : 'Loaned')}\n                        </span>\n                      </td>\n                      <td className=\"py-2 px-4 text-sm text-gray-800\">{book.currentBorrowerName || 'N/A'}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <p className=\"text-gray-500 italic\">No books in the library yet. Add some!</p>\n          )}\n        </div>\n\n        <button\n          onClick={() => setCurrentPage('dashboard')}\n          className=\"mt-8 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n        >\n          Back to Dashboard\n        </button>\n      </div>\n    );\n  };\n\n  const RandomChildSelector = ({ setCurrentPage, students, selectedStudents, countdown, pickingStudent, currentPickedStudent, startPickingStudent, resetPickedStudents }) => (\n    <div className=\"p-6 bg-white rounded-lg shadow-lg\">\n      <h2 className=\"text-3xl font-bold text-gray-800 mb-6\">Random Child Selector</h2>\n      <p className=\"text-gray-600 mb-4\">\n        This tool will pick a random student from your class list, and won't pick them again until everyone has had a turn.\n        Manage students in <span className=\"font-semibold text-gray-700\">Admin Settings</span>.\n      </p>\n\n      <div className=\"text-center mt-8\">\n        {pickingStudent ? (\n          <div className=\"text-5xl font-extrabold text-blue-600 animate-pulse\">\n            {countdown > 0 ? countdown : 'Picking...'}\n          </div>\n        ) : (\n          <>\n            {currentPickedStudent && (\n              <div className=\"text-4xl font-extrabold text-green-700 mb-6 p-4 bg-green-50 border border-green-200 rounded-lg shadow-inner animate-bounce\">\n                {currentPickedStudent}\n              </div>\n            )}\n            <button\n              onClick={startPickingStudent}\n              disabled={students.length === 0}\n              className={`bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-8 rounded-full shadow-xl transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-indigo-300 ${students.length === 0 ? 'opacity-50 cursor-not-allowed' : ''}`}\n            >\n              Pick Random Student\n            </button>\n            {students.length > 0 && selectedStudents.length < students.length && (\n              <button\n                onClick={resetPickedStudents}\n                className=\"ml-4 bg-gray-400 hover:bg-gray-500 text-white font-semibold py-3 px-6 rounded-full shadow-md transition duration-300 ease-in-out transform hover:scale-105\"\n              >\n                Reset All Students\n              </button>\n            )}\n            {selectedStudents.length > 0 && (\n              <p className=\"mt-4 text-gray-600\">\n                Students remaining for this round: <span className=\"font-bold\">{selectedStudents.length}</span>\n              </p>\n            )}\n          </>\n        )}\n      </div>\n\n      <button\n        onClick={() => setCurrentPage('dashboard')}\n        className=\"mt-8 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n      >\n        Back to Dashboard\n      </button>\n    </div>\n  );\n\n  const RewardSystem = ({ setCurrentPage, students, rewardItems, newRewardItemName, setNewRewardItemName, newRewardItemCost, setNewRewardItemCost, newRewardItemQuantity, setNewRewardItemQuantity, rewardStudentSearchInput, setRewardStudentSearchInput, currentRewardStudent, setCurrentRewardStudent, pointsToAdd, setPointsToAdd, selectedRewardItem, setSelectedRewardItem, addRewardItem, handleRewardStudentLookup, addPoints, checkoutRewardItem, rewardStudentSearchInputRef, pointsToAddRef, newRewardItemNameRef, newRewardItemCostRef, newRewardItemQuantityRef, handleEnterKey }) => (\n    <div className=\"p-6 bg-white rounded-lg shadow-lg\">\n      <h2 className=\"text-3xl font-bold text-gray-800 mb-6\">Reward System</h2>\n      <p className=\"text-gray-600 mb-4\">\n        Award points to students by scanning their badge, and let them redeem points for inventory items.\n        Manage students in <span className=\"font-semibold text-gray-700\">Admin Settings</span>.\n      </p>\n\n      {/* Lookup Student by Barcode/PIN/Name */}\n      <div className=\"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\">\n        <h3 className=\"text-xl font-semibold text-gray-700 mb-3\">Student Lookup (Scan Badge, PIN, or Name)</h3>\n        <div className=\"flex items-center mb-2\">\n          <input\n            type=\"text\"\n            value={rewardStudentSearchInput}\n            onChange={(e) => { setRewardStudentSearchInput(e.target.value); }}\n            onKeyDown={(e) => handleEnterKey(e, handleRewardStudentLookup)}\n            placeholder=\"Scan/Enter Student Barcode, PIN, or Name\"\n            className=\"flex-grow p-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            ref={rewardStudentSearchInputRef} // Ref for focus management\n            autoFocus // AutoFocus for the first input on this page\n          />\n          <button\n            onClick={handleRewardStudentLookup}\n            className=\"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-r-lg shadow-md transition duration-300 ease-in-out\"\n          >\n            Lookup Student\n          </button>\n        </div>\n        {currentRewardStudent ? (\n          <p className=\"text-gray-800 mt-2\">\n            Selected Student: <span className=\"font-bold\">{currentRewardStudent.name}</span> (Points: <span className=\"font-bold text-green-700\">{currentRewardStudent.points}</span>)\n          </p>\n        ) : (\n          <p className=\"text-gray-500 italic mt-2\">No student selected.</p>\n        )}\n      </div>\n\n      {/* Add Points to Student */}\n      <div className=\"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\">\n        <h3 className=\"text-xl font-semibold text-gray-700 mb-3\">Add Points</h3>\n        <div className=\"flex items-center\">\n          <input\n            type=\"number\"\n            value={pointsToAdd}\n            onChange={(e) => { setPointsToAdd(e.target.value); }}\n            onKeyDown={(e) => handleEnterKey(e, addPoints)}\n            placeholder=\"Points to add\"\n            className=\"flex-grow p-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-green-500\"\n            ref={pointsToAddRef} // Ref for focus management\n          />\n          <button\n            onClick={addPoints}\n            disabled={!currentRewardStudent || !pointsToAdd || isNaN(parseInt(pointsToAdd)) || parseInt(pointsToAdd) <= 0}\n            className={`bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-r-lg shadow-md transition duration-300 ease-in-out ${(!currentRewardStudent || !pointsToAdd || isNaN(parseInt(pointsToAdd)) || parseInt(pointsToAdd) <= 0) ? 'opacity-50 cursor-not-allowed' : ''}`}\n          >\n            Add Points\n          </button>\n        </div>\n      </div>\n\n      {/* Add Reward Item to Inventory */}\n      <div className=\"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\">\n        <h3 className=\"text-xl font-semibold text-gray-700 mb-3\">Add Reward Item to Inventory</h3>\n        <input\n          type=\"text\"\n          value={newRewardItemName}\n          onChange={(e) => { setNewRewardItemName(e.target.value); }}\n          onKeyDown={(e) => { if (e.key === 'Enter') newRewardItemCostRef.current.focus(); }}\n          placeholder=\"Item Name (e.g., Pencil, Sticker)\"\n          className=\"w-full p-2 mb-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          ref={newRewardItemNameRef} // Ref for focus management\n        />\n        <input\n          type=\"number\"\n          id=\"newRewardItemCostInput\"\n          value={newRewardItemCost}\n          onChange={(e) => { setNewRewardItemCost(e.target.value); }}\n          onKeyDown={(e) => { if (e.key === 'Enter') newRewardItemQuantityRef.current.focus(); }}\n          placeholder=\"Point Cost\"\n          className=\"w-full p-2 mb-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          ref={newRewardItemCostRef} // Ref for focus management\n        />\n        <input\n          type=\"number\"\n          id=\"newRewardItemQuantityInput\"\n          value={newRewardItemQuantity}\n          onChange={(e) => { setNewRewardItemQuantity(e.target.value); }}\n          onKeyDown={(e) => handleEnterKey(e, addRewardItem)}\n          placeholder=\"Quantity\"\n          className=\"w-full p-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          ref={newRewardItemQuantityRef} // Ref for focus management\n        />\n        <button\n          onClick={addRewardItem}\n          className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n        >\n          Add Item\n        </button>\n      </div>\n\n      {/* Checkout Reward Item */}\n      <div className=\"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\">\n        <h3 className=\"text-xl font-semibold text-gray-700 mb-3\">Checkout Reward Item</h3>\n        <select\n          value={selectedRewardItem ? selectedRewardItem.id : ''}\n          onChange={(e) => setSelectedRewardItem(rewardItems.find(item => item.id === e.target.value))}\n          onKeyDown={(e) => handleEnterKey(e, checkoutRewardItem)}\n          className=\"w-full p-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        >\n          <option value=\"\">Select an item to checkout</option>\n          {rewardItems.map(item => (\n            <option key={item.id} value={item.id}>{item.name} ({item.cost} pts) - Qty: {item.quantity}</option>\n          ))}\n        </select>\n        <button\n          onClick={checkoutRewardItem}\n          disabled={!currentRewardStudent || !selectedRewardItem}\n          className={`w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out ${(!currentRewardStudent || !selectedRewardItem) ? 'opacity-50 cursor-not-allowed' : ''}`}\n        >\n          Redeem Item\n        </button>\n      </div>\n\n      {/* Current Reward Inventory */}\n      <div className=\"mt-6\">\n        <h3 className=\"text-2xl font-semibold text-gray-700 mb-4\">Current Reward Inventory</h3>\n        {rewardItems.length > 0 ? (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full bg-white border border-gray-200 rounded-lg shadow-sm\">\n              <thead>\n                <tr className=\"bg-gray-100 border-b\">\n                  <th className=\"py-2 px-4 text-left text-sm font-medium text-gray-600\">Item Name</th>\n                  <th className=\"py-2 px-4 text-left text-sm font-medium text-gray-600\">Point Cost</th>\n                  <th className=\"py-2 px-4 text-left text-sm font-medium text-gray-600\">Quantity</th>\n                </tr>\n              </thead>\n              <tbody>\n                {rewardItems.map((item) => (\n                  <tr key={item.id} className=\"border-b last:border-b-0 hover:bg-gray-50\">\n                    <td className=\"py-2 px-4 text-sm text-gray-800\">{item.name}</td>\n                    <td className=\"py-2 px-4 text-sm text-gray-800\">{item.cost}</td>\n                    <td className=\"py-2 px-4 text-sm text-gray-800\">{item.quantity}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        ) : (\n          <p className=\"text-gray-500 italic\">No reward items in inventory yet. Add some!</p>\n        )}\n      </div>\n\n      <button\n        onClick={() => setCurrentPage('dashboard')}\n        className=\"mt-8 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n      >\n        Back to Dashboard\n      </button>\n    </div>\n  );\n\n  const ExtraCreditPortal = ({ setCurrentPage, assignmentAge, setAssignmentAge, assignmentTopic, setAssignmentTopic, generatedAssignmentContent, setGeneratedAssignmentContent, generatedAssignmentAnswerKey, setGeneratedAssignmentAnswerKey, showAssignmentAnswerKey, setShowAssignmentAnswerKey, generatingAssignment, setGeneratingAssignment, assignmentGenerationError, setAssignmentGenerationError, generateAssignment, saveAssignment, printAssignment, assignmentTopicRef, handleEnterKey }) => (\n    <div className=\"p-6 bg-white rounded-lg shadow-lg\">\n      <h2 className=\"text-3xl font-bold text-gray-800 mb-6\">Extra Credit / Busy Work Portal</h2>\n      <p className=\"text-gray-600 mb-4\">\n        Generate printable extra credit or busy work assignments for your students.\n      </p>\n\n      <div className=\"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\">\n        <h3 className=\"text-xl font-semibold text-gray-700 mb-3\">Generate New Assignment</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n          <div>\n            <label htmlFor=\"assignmentAge\" className=\"block text-sm font-medium text-gray-700 mb-1\">Grade Level:</label>\n            <select\n              id=\"assignmentAge\"\n              value={assignmentAge}\n              onChange={(e) => setAssignmentAge(e.target.value)}\n              className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              {[...Array(12)].map((_, i) => (\n                <option key={i + 1} value={i + 1}>{i + 1}</option>\n              ))}\n            </select>\n          </div>\n          <div>\n            <label htmlFor=\"assignmentTopic\" className=\"block text-sm font-medium text-gray-700 mb-1\">Topic:</label>\n            <input\n              type=\"text\"\n              id=\"assignmentTopic\"\n              value={assignmentTopic}\n              onChange={(e) => { setAssignmentTopic(e.target.value); }}\n              onKeyDown={(e) => handleEnterKey(e, generateAssignment)}\n              placeholder=\"e.g., Math, Science, Art\"\n              className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              ref={assignmentTopicRef} // Ref for focus management\n              autoFocus // AutoFocus for the first input on this page\n            />\n          </div>\n        </div>\n        <button\n          onClick={generateAssignment}\n          disabled={generatingAssignment || !assignmentTopic.trim()}\n          className={`w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-5 rounded-lg shadow-md transition duration-300 ease-in-out ${generatingAssignment || !assignmentTopic.trim() ? 'opacity-50 cursor-not-allowed' : ''}`}\n        >\n          {generatingAssignment ? 'Generating...' : 'Generate Assignment'}\n        </button>\n        {assignmentGenerationError && <p className=\"text-red-500 mt-3 text-center\">{assignmentGenerationError}</p>}\n      </div>\n\n      {generatedAssignmentContent && (\n        <div className=\"mt-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg shadow-inner\">\n          <h3 className=\"text-xl font-semibold text-indigo-800 mb-2\">Generated Assignment:</h3>\n          <div className=\"text-gray-800 mb-4 whitespace-pre-wrap\">{generatedAssignmentContent}</div>\n\n          <h3 className=\"text-xl font-semibold text-indigo-800 mb-2\">Answer Key:</h3>\n          {showAssignmentAnswerKey ? (\n            <div className=\"text-gray-800 mb-4 whitespace-pre-wrap\">{generatedAssignmentAnswerKey}</div>\n          ) : (\n            <button\n              onClick={() => setShowAssignmentAnswerKey(true)}\n              className=\"bg-gray-400 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out mb-4\"\n            >\n              Show Answer Key\n            </button>\n          )}\n\n          <div className=\"flex gap-4 mt-4\">\n            <button\n              onClick={() => printAssignment(generatedAssignmentContent, generatedAssignmentAnswerKey, assignmentTopic, assignmentAge)}\n              className=\"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n            >\n              Print Assignment\n            </button>\n            <button\n              onClick={saveAssignment}\n              className=\"bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n            >\n              Save Assignment\n            </button>\n          </div>\n        </div>\n      )}\n\n      <button\n        onClick={() => setCurrentPage('dashboard')}\n        className=\"mt-8 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n      >\n        Back to Dashboard\n      </button>\n    </div>\n  );\n\n  const SavedAssignments = ({ setCurrentPage, savedAssignments, printAssignment, deleteSavedAssignment }) => (\n    <div className=\"p-6 bg-white rounded-lg shadow-lg\">\n      <h2 className=\"text-3xl font-bold text-gray-800 mb-6\">Saved Assignments</h2>\n      <p className=\"text-gray-600 mb-4\">\n        Here you can find all the assignments you have saved.\n      </p>\n\n      {savedAssignments.length > 0 ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {savedAssignments.map(assignment => (\n            <div key={assignment.id} className=\"bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200 flex flex-col justify-between\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">{assignment.topic} (Grade {assignment.age})</h3>\n                <p className=\"text-sm text-gray-600 mb-3\">Saved: {new Date(assignment.createdAt).toLocaleDateString()}</p>\n                <p className=\"text-sm text-gray-700 line-clamp-3\">{assignment.content}</p>\n              </div>\n              <div className=\"mt-4 flex flex-wrap gap-2\">\n                <button\n                  onClick={() => printAssignment(assignment.content, assignment.answerKey, assignment.topic, assignment.age)}\n                  className=\"bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-3 rounded-lg text-sm shadow-md transition duration-300 ease-in-out\"\n                >\n                  Print\n                </button>\n                <button\n                  onClick={() => deleteSavedAssignment(assignment.id)}\n                  className=\"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-3 rounded-lg text-sm shadow-md transition duration-300 ease-in-out\"\n                >\n                  Delete\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <p className=\"text-gray-500 italic\">No assignments saved yet. Generate and save some from the \"Extra Credit / Busy Work Portal\"!</p>\n      )}\n\n      <button\n        onClick={() => setCurrentPage('dashboard')}\n        className=\"mt-8 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n      >\n        Back to Dashboard\n      </button>\n    </div>\n  );\n\n\n  const QuestionGenerator = ({ setCurrentPage, questionGrade, setQuestionGrade, questionTopic, setQuestionTopic, generatedQuestion, setGeneratedQuestion, generatedAnswer, setGeneratedAnswer, showQuestionAnswer, setShowQuestionAnswer, questionLoading, setQuestionLoading, questionError, setQuestionError, generateQuestion, questionTopicRef, handleEnterKey }) => {\n    return (\n      <div className=\"p-6 bg-white rounded-lg shadow-lg\">\n        <h2 className=\"text-3xl font-bold text-gray-800 mb-6\">Random Question Generator</h2>\n        <p className=\"text-gray-600 mb-4\">\n          Generate questions and answers for different grades and topics using AI.\n        </p>\n\n        <div className=\"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50\">\n          <h3 className=\"text-xl font-semibold text-gray-700 mb-3\">Generate New Question</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n            <div>\n              <label htmlFor=\"questionGrade\" className=\"block text-sm font-medium text-gray-700 mb-1\">Grade Level:</label>\n              <select\n                id=\"questionGrade\"\n                value={questionGrade}\n                onChange={(e) => setQuestionGrade(e.target.value)}\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              >\n                {[...Array(12)].map((_, i) => (\n                  <option key={i + 1} value={i + 1}>{i + 1}</option>\n                ))}\n              </select>\n            </div>\n            <div>\n              <label htmlFor=\"questionTopic\" className=\"block text-sm font-medium text-gray-700 mb-1\">Topic:</label>\n              <input\n                type=\"text\"\n                id=\"questionTopic\"\n                value={questionTopic}\n                onChange={(e) => { setQuestionTopic(e.target.value); }}\n                onKeyDown={(e) => handleEnterKey(e, generateQuestion)}\n                placeholder=\"e.g., Algebra, History, Biology\"\n                className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                ref={questionTopicRef} // Ref for focus management\n                autoFocus // AutoFocus for the first input on this page\n              />\n            </div>\n          </div>\n          <button\n            onClick={generateQuestion}\n            disabled={questionLoading || !questionTopic.trim()}\n            className={`w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-5 rounded-lg shadow-md transition duration-300 ease-in-out ${questionLoading || !questionTopic.trim() ? 'opacity-50 cursor-not-allowed' : ''}`}\n          >\n            {questionLoading ? 'Generating...' : 'Generate Question'}\n          </button>\n          {questionError && <p className=\"text-red-500 mt-3 text-center\">{questionError}</p>}\n        </div>\n\n        {generatedQuestion && (\n          <div className=\"mt-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg shadow-inner\">\n            <h3 className=\"text-xl font-semibold text-indigo-800 mb-2\">Generated Question:</h3>\n            <p className=\"text-gray-800 mb-4\">{generatedQuestion}</p>\n            <h3 className=\"text-xl font-semibold text-indigo-800 mb-2\">Answer:</h3>\n            {showQuestionAnswer ? (\n              <p className=\"text-gray-800\">{generatedAnswer}</p>\n            ) : (\n              <button\n                onClick={() => setShowQuestionAnswer(true)}\n                className=\"bg-gray-400 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n              >\n                Show Answer\n              </button>\n            )}\n          </div>\n        )}\n\n        <button\n          onClick={() => setCurrentPage('dashboard')}\n          className=\"mt-8 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n        >\n          Back to Dashboard\n        </button>\n      </div>\n    );\n  };\n\n  // Custom Modal Component (replaces alert/confirm)\n  const CustomModal = ({ title, message, onClose }) => {\n    if (!showModal) return null;\n    return (\n      <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50\">\n        <div className=\"bg-white p-6 rounded-lg shadow-xl max-w-sm w-full mx-4\">\n          <h3 className=\"text-xl font-bold text-gray-800 mb-4\">{title}</h3>\n          <p className=\"text-gray-700 mb-6 break-words\">{message}</p>\n          <button\n            onClick={onClose}\n            className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out\"\n          >\n            OK\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  const renderPage = () => {\n    switch (currentPage) {\n      case 'dashboard':\n        return <Dashboard setCurrentPage={setCurrentPage} userId={userId} />;\n      case 'admin-settings':\n        return <AdminSettings setCurrentPage={setCurrentPage} students={students} newStudentName={newStudentName} setNewStudentName={setNewStudentName} addStudent={addStudent} removeStudent={removeStudent} newStudentNameRef={newStudentNameRef} />;\n      case 'print-ids':\n        return <PrintStudentIDs setCurrentPage={setCurrentPage} students={students} />;\n      case 'library':\n        return <LibrarySystem setCurrentPage={setCurrentPage} students={students} books={books} newBookISBN={newBookISBN} setNewBookISBN={setNewBookISBN} newBookTitle={newBookTitle} setNewBookTitle={setNewBookTitle} newBookAuthor={newBookAuthor} setNewBookAuthor={setNewBookAuthor} libraryStudentBarcodeInput={libraryStudentBarcodeInput} setLibraryStudentBarcodeInput={setLibraryStudentBarcodeInput} selectedBookForCheckout={selectedBookForCheckout} setSelectedBookForCheckout={setSelectedBookForCheckout} selectedBookForCheckin={selectedBookForCheckin} setSelectedBookForCheckin={setSelectedBookForCheckin} isbnSearchInput={isbnSearchInput} setIsbnSearchInput={setIsbnSearchInput} isbnSearchLoading={isbnSearchLoading} setIsbnSearchLoading={setIsbnSearchLoading} handleISBNLookup={handleISBNLookup} addBook={addBook} checkoutBook={checkoutBook} checkinBook={checkinBook} isbnSearchInputRef={isbnSearchInputRef} newBookISBNRef={newBookISBNRef} newBookTitleRef={newBookTitleRef} newBookAuthorRef={newBookAuthorRef} libraryStudentBarcodeInputRef={libraryStudentBarcodeInputRef} handleEnterKey={handleEnterKey} />;\n      case 'selector':\n        return <RandomChildSelector setCurrentPage={setCurrentPage} students={students} selectedStudents={selectedStudents} countdown={countdown} pickingStudent={pickingStudent} currentPickedStudent={currentPickedStudent} startPickingStudent={startPickingStudent} resetPickedStudents={resetPickedStudents} />;\n      case 'rewards':\n        return <RewardSystem setCurrentPage={setCurrentPage} students={students} rewardItems={rewardItems} newRewardItemName={newRewardItemName} setNewRewardItemName={setNewRewardItemName} newRewardItemCost={newRewardItemCost} setNewRewardItemCost={setNewRewardItemCost} newRewardItemQuantity={newRewardItemQuantity} setNewRewardItemQuantity={setNewRewardItemQuantity} rewardStudentSearchInput={rewardStudentSearchInput} setRewardStudentSearchInput={setRewardStudentSearchInput} currentRewardStudent={currentRewardStudent} setCurrentRewardStudent={setCurrentRewardStudent} pointsToAdd={pointsToAdd} setPointsToAdd={setPointsToAdd} selectedRewardItem={selectedRewardItem} setSelectedRewardItem={setSelectedRewardItem} addRewardItem={addRewardItem} handleRewardStudentLookup={handleRewardStudentLookup} addPoints={addPoints} checkoutRewardItem={checkoutRewardItem} rewardStudentSearchInputRef={rewardStudentSearchInputRef} pointsToAddRef={pointsToAddRef} newRewardItemNameRef={newRewardItemNameRef} newRewardItemCostRef={newRewardItemCostRef} newRewardItemQuantityRef={newRewardItemQuantityRef} handleEnterKey={handleEnterKey} />;\n      case 'assignments':\n        return <ExtraCreditPortal setCurrentPage={setCurrentPage} assignmentAge={assignmentAge} setAssignmentAge={setAssignmentAge} assignmentTopic={assignmentTopic} setAssignmentTopic={setAssignmentTopic} generatedAssignmentContent={generatedAssignmentContent} setGeneratedAssignmentContent={setGeneratedAssignmentContent} generatedAssignmentAnswerKey={generatedAssignmentAnswerKey} setGeneratedAssignmentAnswerKey={setGeneratedAssignmentAnswerKey} showAssignmentAnswerKey={showAssignmentAnswerKey} setShowAssignmentAnswerKey={setShowAssignmentAnswerKey} generatingAssignment={generatingAssignment} setGeneratingAssignment={setGeneratingAssignment} assignmentGenerationError={assignmentGenerationError} setAssignmentGenerationError={setAssignmentGenerationError} generateAssignment={generateAssignment} saveAssignment={saveAssignment} printAssignment={printAssignment} assignmentTopicRef={assignmentTopicRef} handleEnterKey={handleEnterKey} />;\n      case 'saved-assignments':\n        return <SavedAssignments setCurrentPage={setCurrentPage} savedAssignments={savedAssignments} printAssignment={printAssignment} deleteSavedAssignment={deleteSavedAssignment} />;\n      case 'questions':\n        return <QuestionGenerator setCurrentPage={setCurrentPage} questionGrade={questionGrade} setQuestionGrade={setQuestionGrade} questionTopic={questionTopic} setQuestionTopic={setQuestionTopic} generatedQuestion={generatedQuestion} setGeneratedQuestion={setGeneratedQuestion} generatedAnswer={generatedAnswer} setGeneratedAnswer={setGeneratedAnswer} showQuestionAnswer={showQuestionAnswer} setShowQuestionAnswer={setShowQuestionAnswer} questionLoading={questionLoading} setQuestionLoading={setQuestionLoading} questionError={questionError} setQuestionError={setQuestionError} generateQuestion={generateQuestion} questionTopicRef={questionTopicRef} handleEnterKey={handleEnterKey} />;\n      default:\n        return <Dashboard setCurrentPage={setCurrentPage} userId={userId} />;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex items-center justify-center p-4 font-sans antialiased\">\n      {renderPage()}\n      <CustomModal title={modalTitle} message={modalMessage} onClose={closeModal} />\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}